/*! For license information please see quickload.10203c8525d31d2948a9.js.LICENSE.txt */
(self.webpackChunktrello_client=self.webpackChunktrello_client||[]).push([[95771],{"./node_modules/@atlaskit/platform-feature-flags/dist/esm/index.js":(e,t,r)=>{"use strict";var s,n,i,o,a;r.d(t,{e:()=>w,h:()=>v});var c=!(null!==(s=void 0!==(null===globalThis||void 0===globalThis||null===(n=globalThis.process)||void 0===n||null===(i=n.env)||void 0===i?void 0:i.JEST_WORKER_ID))&&void 0!==s&&s)&&"production"!==(null===globalThis||void 0===globalThis||null===(o=globalThis.process)||void 0===o||null===(a=o.env)||void 0===a?void 0:a.NODE_ENV),l=function(){var e;c&&(e=console).debug.apply(e,arguments)},d=r("./node_modules/process/browser.js"),u="@atlaskit/platform-feature-flags",m="__PLATFORM_FEATURE_FLAGS__",p=void 0!==d&&void 0!==d.env,h=!!p&&"true"===d.env.ENABLE_PLATFORM_FF,f=!!p&&"true"===d.env.STORYBOOK_ENABLE_PLATFORM_FF,g=h||f,y={earlyResolvedFlags:new Map,booleanResolver:function(e){return!1}},b="undefined"!=typeof window?window:globalThis;function v(e){var t;t=e,b[m].booleanResolver=t}function w(e){return function(e){if(g)return l('[%s]: The feature flags were enabled while running tests. The flag "%s" will be always enabled.',u,e),!0;try{var t,r=null===(t=b[m])||void 0===t?void 0:t.booleanResolver(e);return"boolean"!=typeof r?(console.warn("".concat(e," resolved to a non-boolean value, returning false for safety")),!1):r}catch(e){return!1}}(e)}b[m]=b[m]||y},"./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/analytics-client/index.js":(e,t,r)=>{"use strict";r.d(t,{zV:()=>Xr,SQ:()=>ts,hC:()=>rs,WF:()=>es});var s=r("./node_modules/@babel/runtime/helpers/esm/defineProperty.js");let n=function(e){return e.LOCAL="local",e.DEV="dev",e.STAGING="staging",e.PROD="prod",e}({}),i=function(e){return e.TRACK="track",e.UI="ui",e.OPERATIONAL="operational",e.SCREEN="screen",e.IDENTIFY="identify",e}({}),o=function(e){return e.MAC="mac",e.LINUX="linux",e.WINDOWS="windows",e.DESKTOP="desktop",e.WEB="web",e.MOBILE_WEB="mobileWeb",e}({}),a=function(e){return e.DESKTOP="desktop",e.WEB="web",e}({}),c=function(e){return e.CLOUD_ID="cloudId",e.ORG_ID="orgId",e.OPSGENIE_CUSTOMER_ID="opsgenieCustomerId",e.HALP_TEAM_ID="halpTeamId",e.TRANSACTION_ACCOUNT_ID="transactionAccountId",e.TRELLO_WORKSPACE_ID="trelloWorkspaceId",e.NONE="none",e}({}),l=function(e){return e.ATLASSIAN_ACCOUNT="atlassianAccount",e.HASHED_EMAIL="hashedEmail",e.TRELLO="trello",e.OPSGENIE="opsgenie",e.HALP="halp",e}({}),d=function(e){return e.TRANSITION="transition",e.INITIAL_LOAD="initialLoad",e}({});const u=Object.freeze([o.DESKTOP,o.MAC,o.LINUX,o.WINDOWS]),m=Object.freeze([o.WEB,o.MOBILE_WEB]);let p=function(e){return e.ATL_ORIGIN="atlOrigin",e}({});function h(e){return Object.values(e)}function f(e,t){return Object.values(e).indexOf(t)>-1}let g=function(e){return e.C5="c5",e.COMMERCIAL="commercial",e.FEDRAMP_MODERATE="fedramp-moderate",e.FEDRAMP_HIGH="fedramp-high",e}({});var y=r("./node_modules/@atlassian/browser-storage-controls/node_modules/uuid/v4.js"),b=r.n(y);class v{constructor(){(0,s.Z)(this,"_bindEventListeners",(()=>{document.addEventListener(this._visibilityChange,this._handleVisibilityChange,!1)})),(0,s.Z)(this,"_handleVisibilityChange",(()=>{const e=document[this._hidden];this._isHidden=e,this._callbacks.forEach((t=>t(e)))})),this._isHidden=!1,this._callbacks=new Map,this._hidden=void 0,this._visibilityChange=void 0,"undefined"!=typeof document&&(void 0!==document.hidden?(this._isHidden=document.hidden,this._hidden="hidden",this._visibilityChange="visibilitychange"):void 0!==document.msHidden?(this._isHidden=document.msHidden,this._hidden="msHidden",this._visibilityChange="msvisibilitychange"):void 0!==document.webkitHidden&&(this._isHidden=document.webkitHidden,this._hidden="webkitHidden",this._visibilityChange="webkitvisibilitychange"),void 0!==document.addEventListener&&void 0!==this._hidden&&this._bindEventListeners())}addCallback(e,t){if("string"!=typeof e)throw new Error("Invalid name, must be string");if("function"!=typeof t)throw new Error("Invalid callback, must be function");this._callbacks.set(e,t)}removeCallback(e){this._callbacks.has(e)&&this._callbacks.delete(e)}getIsHidden(){return this._isHidden}}class w{constructor(){this._performance=window.performance}clearMarks(...e){this._performance&&this._performance.clearMarks&&this._performance.clearMarks(...e)}mark(...e){this._performance&&this._performance.mark&&this._performance.mark(...e)}getEntriesByName(...e){return this._performance&&this._performance.getEntriesByName?this._performance.getEntriesByName(...e):[]}getTimeOrigin(){return this._performance&&(this._performance.timeOrigin||this._performance.timing)?this._performance.timeOrigin||this._performance.timing.navigationStart:0}now(){return this._performance&&this._performance.now?this._performance.now():Date.now?Date.now():+new Date}isAvailable(){return!!(this._performance&&this._performance.clearMarks&&this._performance.mark&&this._performance.getEntriesByName&&this._performance.timing)}}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class I{constructor(e,t){if((0,s.Z)(this,"_getEventKey",(({task:e,taskId:t})=>t?`${e}.${t}`:e)),(0,s.Z)(this,"_getEventTimingByName",(e=>{const t=this._performance.getEntriesByName(e);return t[t.length-1]})),(0,s.Z)(this,"_getApdexFields",(e=>{const t=this._getApdexTimings(e),r=this._calculateApdex({duration:t.duration,threshold:e.threshold});return C(C({},t),{},{apdex:r})})),(0,s.Z)(this,"_getApdexTimings",(e=>{const t=this._getEventKey(e),r=`${t}-start`,s=e.startTime||this._getStartTime(e,r),n=e.stopTime||this._getStopTime();return this._cleanApdexState(t),{startTime:s,stopTime:n,duration:n-s}})),(0,s.Z)(this,"_getStartTime",((e,t)=>{let r;const s=this._performance.getTimeOrigin();if(e.type===d.INITIAL_LOAD)r=s;else{r=s+this._getEventTimingByName(t).startTime}return r})),(0,s.Z)(this,"_getStopTime",(()=>this._performance.getTimeOrigin()+this._performance.now())),(0,s.Z)(this,"_cleanApdexState",(e=>{this._performance.clearMarks(`${e}-start`),this._performance.clearMarks(`${e}-stop`),this._startedEvents.delete(e)})),(0,s.Z)(this,"_getVisibilityFields",(e=>{let t;if(e.type===d.INITIAL_LOAD)t=!this._wasPreviouslyHidden;else if(e.type===d.TRANSITION){const r=this._getEventKey(e);t=this._isActiveEvents.get(r)}return(e.startTime||e.stopTime)&&(t=!this._pageVisibility.getIsHidden()),{isActiveTab:t}})),(0,s.Z)(this,"_calculateApdex",(({duration:e,threshold:t=this._threshold})=>{let r;return r=e<=t?1:e<=4*t?.5:0,r})),(0,s.Z)(this,"_validateStartEvent",(e=>{if(!e)throw new Error('Missing "event" in Apdex start event');if(!e.task)throw new Error('Missing "task" in Apdex start event');if("string"!=typeof e.task)throw new Error('Invalid "task" in Apdex start event');if(e.taskId&&"string"!=typeof e.taskId)throw new Error('Invalid "taskId" in Apdex start event')})),(0,s.Z)(this,"_validateStopEvent",(e=>{if(!e)throw new Error('Missing "event" in Apdex stop event');if(!e.task)throw new Error('Missing "task" in Apdex stop event');if("string"!=typeof e.task)throw new Error('Invalid "task" in Apdex stop event');if(e.taskId&&"string"!=typeof e.taskId)throw new Error('Invalid "taskId" in Apdex stop event');if(!e.type)throw new Error('Missing "type" in Apdex stop event');if(e.type&&!f(d,e.type))throw new Error('Invalid "type" in Apdex stop event');if(e.threshold&&"number"!=typeof e.threshold)throw new Error('Invalid "threshold" in Apdex stop event');if(!e.startTime&&e.type===d.TRANSITION){const t=this._getEventKey(e);if(!this._startedEvents.has(t))throw new Error(`Apdex event transition "${t}" was not started`)}if(e.startTime&&!("number"==typeof e.startTime&&e.startTime>=0))throw new Error('Invalid "startTime" in Apdex stop event');if(e.stopTime&&"number"!=typeof e.stopTime)throw new Error('Invalid "stopTime" in Apdex stop event');if(e.stopTime<=e.startTime)throw new Error('"stopTime" should be greater than "startTime" in Apdex stop event')})),(0,s.Z)(this,"_shouldSendEvent",(e=>!!e&&"number"==typeof e.apdex)),(0,s.Z)(this,"_sendEvent",((e,t)=>{this._shouldSendEvent(e)&&this._onEvent({source:"ui",action:"readyForUser",actionSubject:"ui",attributes:C(C({},e.additionalAttributes),{},{task:e.task,taskId:e.taskId,type:e.type,threshold:e.threshold||this._threshold,apdex:e.apdex,startTime:e.startTime,stopTime:e.stopTime,duration:e.duration,isActiveTab:e.isActiveTab})},t)})),!e)throw new Error("Missing onEvent callback");if("function"!=typeof e)throw new Error("Invalid onEvent, must be function");if(!(t instanceof v))throw new Error("Invalid pageVisibility, must be PageVisibility class");this._startedEvents=new Map,this._performance=new w,this._onEvent=e,this._threshold=1e3,this._wasPreviouslyHidden=t.getIsHidden(),this._isActiveEvents=new Map,this._pageVisibility=t,this._pageVisibility.addCallback("apdexEvent",(e=>{this.onVisibilityChange(!e)}))}start(e){if(this._validateStartEvent(e),!this._performance.isAvailable())return;const t=this._getEventKey(e),r=`${t}-start`;this._startedEvents.set(t,!0),this._isActiveEvents.set(t,!this._pageVisibility.getIsHidden()),this._performance.clearMarks(r),this._performance.mark(r)}getStart(e){if(this._validateStartEvent(e),!this._performance.isAvailable())return;const t=`${this._getEventKey(e)}-start`;return this._getEventTimingByName(t)}stop(e,t){if(this._validateStopEvent(e),!this._performance.isAvailable())return;const r=this._getApdexFields(e),s=this._getVisibilityFields(e);this._sendEvent(C(C(C({},e),r),s),t)}onVisibilityChange(e){e||(this._wasPreviouslyHidden=!0,Array.from(this._isActiveEvents.keys()).forEach((e=>this._isActiveEvents.set(e,!1))))}}const O=(e,t)=>()=>{if((e=>"function"==typeof e)(e))try{return e()}catch(e){return void console.error(`${t} - ${e instanceof Error?e.message:String(e)}`)}return e};function E(e){return!0==(null!==(t=e)&&"object"==typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);var t}function S(e){if(!1===E(e))return!1;const t=e.constructor;if("function"!=typeof t)return!1;const r=t.prototype;return!1!==E(r)&&"isPrototypeOf"in r}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e){return{tenantIdType:e.tenantIdType,tenantId:e.tenantId}}function j(e){return{userIdType:e.userIdType}}function P(e){return{orgId:e.orgId}}function D(e){return{workspaceId:e.workspaceId}}function N(e){return e.anonymousId?{anonymousId:e.anonymousId}:{}}function x(e,t){return void 0===t?e:t}function L(e,t){const r=t||{};return{env:x(e.env,r.env),product:x(e.product,r.product),subproduct:x(e.subproduct(),r.subproduct),version:x(e.version,r.version),origin:x(e.origin,r.origin),platform:x(e.platform,r.platform)}}function R(e){return S(e)&&Object.keys(e).length>0}function M(e,t){return R(t)?{[e]:t}:void 0}function F(e){if(R(e)){const t=function(e){const t={};return Object.keys(e).forEach((r=>{const s=e[r];t[r]={id:s.id,type:s.type}})),t}(e);return M("containers",t)}}function Z(e,t){return T({containerType:e.containerType,containerId:e.containerId,source:e.source,objectType:e.objectType,objectId:e.objectId,actionSubject:e.actionSubject,action:e.action,actionSubjectId:e.actionSubjectId,attributes:e.attributes,nonPrivacySafeAttributes:e.nonPrivacySafeAttributes,tags:e.tags,highPriority:e.highPriority,eventType:t},F(e.containers))}function U(e,t,r,s,n,o,a,c,l,d,u,m,p,h){const f=L(e),g=A(t),y=j(r),b=P(d),v=D(m),w={title:"",path:"",url:"",referrer:"",search:"",eventType:i.SCREEN};return T(T(T(T(T(T(T(T(T(T({},f),g),y),b),w),function(e){return M("attributes",e)}(s)),function(e){return M("nonPrivacySafeAttributes",e)}(n)),F(h)),N(p)),{},{tags:o,tabId:a,sessionId:c,taskSessions:l,pageLoadId:u},v)}function B(e){return`${e.actionSubject} ${e.action}`}function $(e,t,r,s,n,i,o,a,c,l,d){const u=L(e,function(e){const{env:t,product:r,subproduct:s,version:n,origin:i,platform:o}=e;return{env:t,product:r,subproduct:s,version:n,origin:i,platform:o}}(s)),m=A(t),p=P(c),h=D(d),f=j(r),g=Z(s,n);return T(T(T(T(T(T(T({},u),m),p),f),g),N(s)),{},{tabId:i,sessionId:o,taskSessions:a,pageLoadId:l},h)}const q=(e,t)=>Object.keys(e).reduce(((r,s)=>(r[t(e[s],s,e)]=e[s],r)),{}),V=(e,t)=>Object.keys(e).filter((e=>t.indexOf(e)<0)).reduce(((t,r)=>(t[r]=e[r],t)),{}),H=(e,t)=>{if(e===t)return!0;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(!e||!t||"object"!=typeof e&&"object"!=typeof t)return e===t;if(e.prototype!==t.prototype)return!1;const r=Object.keys(e);return r.length===Object.keys(t).length&&r.every((r=>H(e[r],t[r])))},z=(e,t)=>e.reduce(((e,r,s,n)=>(e[t(r,s,n)?0:1].push(r),e)),[[],[]]),W=Object.freeze([i.OPERATIONAL,i.TRACK,i.UI]);function G(e){if(e){if(e&&e.constructor!==Object)throw new Error("properties.containers must be an Object");Object.values(e).forEach((e=>function(e){if(!S(e))throw new Error("properties.containers must be an Object");if(!("id"in e))throw new Error("properties.containers is missing field 'id'");if("string"!=typeof e.id)throw new Error("properties.containers.id must be of type String");if("type"in e&&"string"!=typeof e.type)throw new Error("properties.containers.type must be of type String")}(e)))}}function K(e){switch(e){case i.OPERATIONAL:case i.TRACK:case i.UI:return!0;default:return!1}}function Q(e){if(!e)throw new Error("Missing event");if(!e.source)throw new Error("Missing event.source");if(!e.actionSubject)throw new Error("Missing event.actionSubject");if(!e.action)throw new Error("Missing event.action");G(e.containers)}class Y{constructor(e,t){if((0,s.Z)(this,"canCompress",(e=>{try{return e&&K(e.eventType)&&this.predicate(e)}catch(e){return!1}})),(0,s.Z)(this,"compress",(e=>{const[t,r]=z(e,(e=>this.canCompress(e))),s=this.compressFn(t);if(!s)throw new Error("No events were returned from the compression function");return s.forEach((e=>{!function(e){if(!K(e))throw new Error(`Invalid action event type: ${e}, must be one of: [${W}]`)}(e.eventType),Q(e)})),s.concat(r)})),"function"!=typeof e)throw new Error("Invalid predicate, must be a function that accepts an event and returns a boolean");if("function"!=typeof t)throw new Error("Invalid compressFn, must be a function that both accepts and returns an array of events");this.predicate=e,this.compressFn=t}}function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class ee{constructor(e=[]){if((0,s.Z)(this,"canCompress",(e=>this.compressionRules.some((t=>t.canCompress(e))))),(0,s.Z)(this,"compress",(e=>this.createGroups(e).reduce(((e,t)=>{const r=this.compressGroup(t);return e.concat(r)}),[]))),(0,s.Z)(this,"createGroups",(e=>e.reduce(((e,t)=>{const r=this.compressionRules.find((e=>e.canCompress(t)));let s;if(r){const e=Z(t,t.eventType);s=V(t,Object.keys(e))}const n=e.find((e=>r===e.compressor&&H(s,e.contextFields)));return n?n.events.push(t):e.push({contextFields:s,compressor:r,events:[t]}),e}),[]))),(0,s.Z)(this,"compressGroup",(e=>{if(!e.compressor)return e.events;try{return e.compressor.compress(e.events).map((t=>X(X({},t),e.contextFields)))}catch(t){return console.warn(`Failed to compress some analytics events. Error: ${t.message}. Sending ${e.events.length} uncompressed events instead`),e.events}})),!Array.isArray(e))throw new Error("Event compressors must be constructed with an array of CompressionRules");if(!e.every((e=>e instanceof Y)))throw new Error("Event compressors can only be constructed with instances of CompressionRule");this.compressionRules=e}}class te{constructor(e,t){(0,s.Z)(this,"push",((e,t,r,s)=>{this.eventArgs.push({identifier:e,builtEvent:t,context:r,userInfo:s})})),(0,s.Z)(this,"size",(()=>this.eventArgs.length)),(0,s.Z)(this,"startFlush",(()=>{try{this.eventArgs=this.compressEventArgs(this.eventArgs)}catch(e){console.warn(`Failed to perform compression on the delayed analytics events. Error: ${e.message}. Sending ${this.eventArgs.length} uncompressed events instead`)}this.flushNextBatch()})),(0,s.Z)(this,"cancelFlush",(()=>{this.flushBatchTimeout&&(clearTimeout(this.flushBatchTimeout),this.flushBatchTimeout=null)})),(0,s.Z)(this,"flushNextBatch",(()=>{this.eventArgs.splice(0,7).forEach((e=>this.processFn(e.identifier,e.builtEvent,e.context,e.userInfo))),this.eventArgs.length>0?this.flushBatchTimeout=setTimeout((()=>this.flushNextBatch()),100):this.flushBatchTimeout=null})),(0,s.Z)(this,"compressEventArgs",(e=>{const[t,r]=z(e,(e=>this.compressor.canCompress(e.builtEvent))),s=t.reduce(((e,t)=>{const r=e.find((e=>H(e.userInfo,t.userInfo)&&H(e.context,t.context)));return r?r.eventArgs.push(t):e.push({userInfo:t.userInfo,context:t.context,eventArgs:[t]}),e}),[]).reduce(((e,t)=>{try{const r=t.eventArgs.map((e=>e.builtEvent)),s=this.compressor.compress(r).map((e=>({identifier:B(e),builtEvent:e,userInfo:t.userInfo,context:t.context})));return e.concat(s)}catch(e){return console.warn(`Failed to compress some analytics events. Error: ${e.message}. Sending ${t.eventArgs.length} uncompressed events instead`),t.eventArgs}}),[]);return r.forEach((e=>s.push(e))),s})),this.processFn=e,this.flushBatchTimeout=null,this.eventArgs=[],this.compressor=new ee(t)}}let re=function(e){return e.TIMEOUT="timeout",e.MANUAL="manual",e}({});class se{constructor(e,t){(0,s.Z)(this,"push",((e,t,r,s)=>{this.delayQueue.push(e,t,r,s)})),(0,s.Z)(this,"startLowPriorityEventDelay",((e=1e4,t)=>{if(Number.isNaN(e)||e<=0)throw new Error(`Invalid timeout period: ${e}, must be a number greater than 0`);this.delayTimeout&&clearTimeout(this.delayTimeout);const r=e?Math.min(e,3e4):3e4;this.delayCallback=t,this.delayTimeout=setTimeout((()=>this.stopLowPriorityEventDelay(re.TIMEOUT)),r),this.delayQueue.cancelFlush(),this.isDelaying=!0})),(0,s.Z)(this,"stopLowPriorityEventDelay",((e=re.MANUAL)=>{var t;this.delayTimeout&&(clearTimeout(this.delayTimeout),this.delayTimeout=void 0),this.delayQueue.startFlush(),this.isDelaying=!1,null===(t=this.delayCallback)||void 0===t||t.call(this,e),this.delayCallback=void 0})),(0,s.Z)(this,"isDelayingLowPriorityEvents",(()=>this.isDelaying)),this.isDelaying=!1,this.delayQueue=new te(e,t)}}let ne=function(e){return e.IN_PROGRESS="inProgress",e.QUEUE="queue",e.RECLAIM_START="reclaimStart",e.RECLAIM_END="reclaimEnd",e.ACK="ack",e}({}),ie=function(e){return e[e.RECLAIM_TIMEOUT=1e4]="RECLAIM_TIMEOUT",e[e.RECLAIM_WAIT=500]="RECLAIM_WAIT",e[e.RECLAIM_WAIT_THRESHOLD=2e3]="RECLAIM_WAIT_THRESHOLD",e}({});const oe=(e,t)=>({[ne.ACK]:`${e}.${t}.${ne.ACK}`,[ne.QUEUE]:`${e}.${t}.${ne.QUEUE}`,[ne.IN_PROGRESS]:`${e}.${t}.${ne.IN_PROGRESS}`,[ne.RECLAIM_START]:`${e}.${t}.${ne.RECLAIM_START}`,[ne.RECLAIM_END]:`${e}.${t}.${ne.RECLAIM_END}`}),ae=Object.values(ne);function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const de=e=>new Promise((t=>{setTimeout(t,e)})),ue=async(e,t)=>{const{queue:r,inProgress:s}=e.storageKeys,n=JSON.parse(localStorage.getItem(r)||"[]"),i=JSON.parse(localStorage.getItem(s)||"{}"),o=[...n,...Object.entries(i).map((([e,t])=>le(le({},t),{},{attemptNumber:t.attemptNumber+1,id:e})))];if(o.length>0){const n=await t(o);if("successful"===n.status)me(e.storageKeys);else if("partial"===n.status){const e=o.filter((e=>!n.acceptedItemIds.includes(e.id)));return localStorage.removeItem(s),localStorage.setItem(r,JSON.stringify(e)),{fullReclaim:!1}}}else me(e.storageKeys);return{fullReclaim:!0}},me=e=>{localStorage.removeItem(e.queue),localStorage.removeItem(e.inProgress),localStorage.removeItem(e.reclaimEnd),localStorage.removeItem(e.reclaimStart),localStorage.removeItem(e.ack)},pe=async(e,t)=>{if("string"!=typeof e||0===e.length)return{fullReclaims:0,partialReclaims:0,failedReclaims:0};const r=b()(),s=(e=>{try{return Object.keys(localStorage).filter((t=>t.startsWith(e))).map((e=>e.split("."))).filter((t=>{if(3===t.length&&t[0]===e&&t[2]===ne.ACK)try{const e=localStorage.getItem(t.join("."));if(e){const t=parseInt(e);return ie.RECLAIM_TIMEOUT+t<Date.now()}}catch(e){}return!1})).map((e=>e[1]))}catch(e){}return[]})(e),n=s.map((s=>(async(e,t)=>{const{ack:r,reclaimStart:s,reclaimEnd:n}=e.storageKeys,i=Date.now();if(localStorage.setItem(s,e.reclaimProcessId),localStorage.setItem(r,i.toString()),await de(ie.RECLAIM_WAIT),Date.now()>i+ie.RECLAIM_WAIT_THRESHOLD||localStorage.getItem(s)!==e.reclaimProcessId)throw new Error("Took to long to callback, reclaim abandonded. After reclaimStart.");if(localStorage.setItem(n,e.reclaimProcessId),await de(ie.RECLAIM_WAIT),Date.now()>i+ie.RECLAIM_WAIT_THRESHOLD||localStorage.getItem(s)!==e.reclaimProcessId||localStorage.getItem(n)!==e.reclaimProcessId)throw new Error("Took to long to callback, reclaim abandonded. After reclaimEnd.");return ue(e,t)})({queuePrefix:e,reclaimProcessId:r,storageKeys:oe(e,s)},t))),i=await Promise.allSettled(n),o=i.filter((e=>"rejected"===e.status)),a=i.filter((e=>"fulfilled"===e.status)).map((e=>e.value)),c=a.filter((e=>e.fullReclaim)),l=a.filter((e=>!e.fullReclaim));return{failedReclaims:o.length,partialReclaims:l.length,fullReclaims:c.length}},he="namespace-timeAdded",fe="analytics-resilience",ge="timeToBeProcessedAfter",ye="timeAdded",be="retryAttempts";let ve=function(e){return e.INDEXEDDB="indexeddb",e.MEMORY="memory",e}({}),we=function(e){return e.IGNORE="ignore",e.ABANDON="abandon",e.EVICT="evict",e}({});class _e extends Error{constructor(){super("window.indexeddb is undefined."),Object.setPrototypeOf(this,_e.prototype),this.name="NoIndexedDbError"}}const Ce="AbandonWriteError";class Ie extends Error{constructor(e){super(`Event Limit reached. Abandoning write to: ${e}`),Object.setPrototypeOf(this,Ie.prototype),this.name=Ce}}const Oe="CallbackProcessingError";class Ee extends Error{constructor(e){super(`Error thrown while processing events in callback: ${e&&"object"==typeof e&&"toString"in e&&"function"==typeof e.toString&&e.toString()||"string"==typeof e&&e||"Argument passed to CallbackProcessingError was not an Error or string."}`),Object.setPrototypeOf(this,Ee.prototype),this.name=Oe}}const Se="InvalidPolicyError";class ke extends Error{constructor(e,t){super(`Method '${t}' cannot be called with policy '${e}'.`),this.name=Se}}const Te=e=>{if(e&&"object"==typeof e&&"name"in e){const t=e;return"string"==typeof t.name&&(t.name===Ce||t.name===Oe||t.name===Se)}return!1};var Ae=r("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js");const je=(e,t,{id:r,retryAttempts:s,timeToProcessOffset:n})=>({item:e,id:r||b()(),retryAttempts:s||0,timeToBeProcessedAfter:Date.now()+(n||0),namespace:t,timeAdded:Date.now()}),Pe=e=>({logger:e.logger||console,useMemory:e.useMemory||!1,maxAttempts:e.maxAttempts||10,maxEventLimit:e.maxEventLimit||5e3}),De=e=>new Promise(((t,r)=>{e.onsuccess=e=>{t(e)},e.onerror=e=>{r(e)}})),Ne=(e,t)=>{try{"function"==typeof e.commit&&e.commit()}catch(e){throw t.error("Failed to force commit transaction:",e),e}return(e=>new Promise(((t,r)=>{e.oncomplete=()=>{t()},e.onerror=e=>{r(e)},e.onabort=e=>{r(e)}})))(e)},xe=(e,t)=>{e.onerror=e=>{t.warn("Error thrown from request:",e)}};class Le{constructor(e,t,r,n){if((0,s.Z)(this,"deleteOldestNEvents",(async(e,t)=>{var r;const s=e.index(he),n=IDBKeyRange.bound([this.namespace,0],[this.namespace,Date.now()]),i=s.getAllKeys(n,t),o=await De(i),a=null==o||null===(r=o.target)||void 0===r?void 0:r.result;if(a&&Array.isArray(a)&&a.length>0)try{const t=a.map((t=>this.deleteItemHandler(e,t)));await Promise.all(t)}catch(e){throw this.logger.warn("Failed to delete items from indexeddb.",e),e}})),!(e>0))throw Error("Event Limit has to be set higher than 1");this.eventLimit=e,this.namespace=t,this.logger=r,this.deleteItemHandler=n}async insertItems(e,t,r=we.ABANDON){const s=[...t];let n=0;switch(r){case we.ABANDON:await this.throwIfNotEnoughSpace(e,t.length);break;case we.EVICT:n=await this.evictIfNotEnoughSpace(e,t.length);break;case we.IGNORE:await this.calculateHowManyEventsWeCanAdd(e,s)}const i=s.map((t=>De(e.add(t))));return await Promise.all(i),await Ne(e.transaction,this.logger),{items:s,numberOfEvictedItems:n}}async throwIfNotEnoughSpace(e,t){const r=await this.calculateFreeSpace(e);if(r<t)throw new Ie(`Not enough space in IndexedDb. Needed ${t} but only had ${r}`)}async evictIfNotEnoughSpace(e,t){const r=await this.calculateFreeSpace(e);if(r<t){const s=t-r;return await this.deleteOldestNEvents(e,s),s}return 0}async calculateHowManyEventsWeCanAdd(e,t){const r=await this.calculateFreeSpace(e);if(r<t.length){const e=t.length-r,s=t.length-e;t.splice(s,e)}}async calculateFreeSpace(e){const t=await this.getCountofEventsInObjectStore(e);return this.eventLimit-t}async getCountofEventsInObjectStore(e){const t=e.index(he),r=IDBKeyRange.bound([this.namespace,0],[this.namespace,Date.now()]),s=t.count(r);return(await De(s)).target.result}}const Re=["item"],Me=["items"];function Fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}class Ze{constructor(e,t={}){if((0,s.Z)(this,"startDB",(async()=>new Promise((async(e,t)=>{if("undefined"!=typeof window){window.setTimeout((()=>{this.logger.warn("IndexedDB timed out."),t(new _e)}),15e3);const r=window.indexedDB.open("analytics-web-client",1);r.onupgradeneeded=e=>{if(0!==e.oldVersion)throw new Error("We cannot upgrade the database. Do not do this.");const t=r.result.createObjectStore(fe,{keyPath:"id"});t.createIndex(ge,ge,{unique:!1}),t.createIndex(be,be,{unique:!1}),t.createIndex(ye,ye,{unique:!1}),t.createIndex(he,["namespace","timeAdded"],{unique:!1})};try{return await De(r),e(r.result)}catch(e){this.logger.warn("IndexedDB failed to initialise.",e),t(new _e)}}})))),(0,s.Z)(this,"addItem",(async(e,t={},r=we.ABANDON)=>{const{logger:s,namespace:n}=this,i=je(e,n,t),{objectStore:o}=await this.getObjectStoreAndTransaction("readwrite");if(r===we.IGNORE)throw new ke(r,"IndexedDbConnector#addItem");try{if(!i.namespace||0===i.namespace.length||"string"!=typeof i.namespace)throw new Error("Namespace not specified");const e=await this.globalEventLimitGuard.insertItems(o,[i],r);if(1===e.items.length)return{item:e.items[0],numberOfEvictedItems:e.numberOfEvictedItems};throw new Error(`Incorrect number of items added. Expected: 1, got: ${e.items.length}`)}catch(e){if(Te(e))throw e;throw s.log("Failed to add item to table",e),new Error("Request to add item to table failed")}})),(0,s.Z)(this,"bulkAddItem",(async(e,t=we.ABANDON)=>{const{logger:r,namespace:s}=this,n=e.map((e=>{let{item:t}=e,r=(0,Ae.Z)(e,Re);return je(t,s,r)})),{objectStore:i}=await this.getObjectStoreAndTransaction("readwrite");try{return await this.globalEventLimitGuard.insertItems(i,n,t)}catch(e){if(Te(e))throw e;throw r.log("Failed to add item to table",e),new Error("Request to add item to table failed")}})),(0,s.Z)(this,"getItems",(async(e=7)=>{const t=e>0?e:7,{logger:r}=this,n=this.options.maxAttempts,{transaction:i,objectStore:o}=await this.getObjectStoreAndTransaction("readwrite"),a=o.index(ge),c=IDBKeyRange.upperBound(Date.now()),l=a.openCursor(c),d=await new Promise((async(e,i)=>{const o=[];let a=0;l.onerror=e=>{r.error("Failed to open cursor:",e),i("Failed to open cursor")},l.onsuccess=i=>{const c=i.target.result;if(c){const i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},c.value);o.push(i);const l=c.value;if(l.retryAttempts+=1,l.timeToBeProcessedAfter=Date.now()+6e4,l.retryAttempts>=n){++a;const e=c.delete();xe(e,r)}else{const e=c.update(l);xe(e,r)}o.length<t?c.continue():e({items:o,numberOfDeletedItems:a})}else e({items:o,numberOfDeletedItems:a})}}));return await Ne(i,this.logger),d})),(0,s.Z)(this,"deleteItems",(async e=>{const{transaction:t,objectStore:r}=await this.getObjectStoreAndTransaction("readwrite");try{const s=e.map((e=>this.deleteItem(r,e)));await Ne(t,this.logger),await Promise.all(s)}catch(e){throw this.logger.warn("Failed to delete items from indexeddb.",e),e}})),(0,s.Z)(this,"getItemCount",(async()=>{const{transaction:e,objectStore:t}=await this.getObjectStoreAndTransaction("readonly"),r=t.index(ge),s=IDBKeyRange.upperBound(Date.now()),n=r.count(s),i=await De(n);return await Ne(e,this.logger),i.target.result})),(0,s.Z)(this,"processItems",(async(e,t=7)=>{const r=await this.getItems(t),{items:s}=r,n=(0,Ae.Z)(r,Me);try{const t=await e(s,n),r=s.map((e=>e.id));return await this.deleteItems(r),t}catch(e){throw new Ee(e)}})),(0,s.Z)(this,"deleteItem",(async(e,t)=>{const{logger:r}=this;try{await De(e.delete(t))}catch(e){throw r.error("Failed to delete item:",t,e),e}})),(0,s.Z)(this,"getObjectStoreAndTransaction",(async e=>{const t=(await this.db).transaction(fe,e),r=t.objectStore(fe);return{transaction:t,objectStore:r}})),this.options=Pe(t),this.namespace=e,this.logger=this.options.logger,!window.indexedDB)throw new _e;this.db=this.startDB(),this.db.catch((()=>{})),this.globalEventLimitGuard=new Le(this.options.maxEventLimit,this.namespace,this.logger,this.deleteItem)}storeType(){return ve.INDEXEDDB}}class Ue{constructor(e,t){if((0,s.Z)(this,"insertItemsToMemoryStore",((e,t)=>{switch(t){case we.ABANDON:return this.handleAbandonIfLimitWillExceedPolicy(e);case we.EVICT:return Promise.resolve(this.handleEvictOldestIfLimitExceededPolicy(e));case we.IGNORE:return this.handleAddAsManyAsPossible(e)}})),!(e>0))throw Error("Event Limit has to be set higher than 1");this.eventLimit=e,this.memoryItemHandlers=t}async handleAbandonIfLimitWillExceedPolicy(e){if(await this.memoryItemHandlers.getItemCount()+e.length>this.eventLimit)throw new Ie(ve.MEMORY);return this.memoryItemHandlers.addItems(e),{items:e,numberOfEvictedItems:0}}handleEvictOldestIfLimitExceededPolicy(e){this.memoryItemHandlers.addItems(e);return{items:e,numberOfEvictedItems:this.memoryItemHandlers.evictEventsIfNeeded(this.eventLimit)}}async handleAddAsManyAsPossible(e){const t=this.eventLimit-await this.memoryItemHandlers.getItemCount(),r=t>e.length?e:e.slice(0,t);return this.memoryItemHandlers.addItems(r),{items:r,numberOfEvictedItems:0}}}const Be=["item"],$e=["items"];function qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function Ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class He{constructor(e,t={}){this.namespace=e,this.memoryStore=[],this.options=Pe(t),this.globalEventLimitGuard=new Ue(this.options.maxEventLimit,{addItems:this.addItems.bind(this),getItemCount:this.getItemCount.bind(this),evictEventsIfNeeded:this.evictEventsIfNeeded.bind(this)})}async addItem(e,t={},r=we.ABANDON){if(r===we.IGNORE)throw new ke(r,"IndexedDbConnector#addItem");const s=je(e,this.namespace,t),n=await this.globalEventLimitGuard.insertItemsToMemoryStore([s],r);return Promise.resolve({item:n.items[0],numberOfEvictedItems:n.numberOfEvictedItems})}bulkAddItem(e,t=we.ABANDON){const r=e.map((e=>{let{item:t}=e,r=(0,Ae.Z)(e,Be);return je(t,this.namespace,r)}));return this.bulkAddItemWrapperType(r,t)}bulkAddItemWrapperType(e,t=we.ABANDON){return Promise.resolve(this.globalEventLimitGuard.insertItemsToMemoryStore(e,t))}getItems(e=7){return Promise.resolve(this.synchronousGetItems(e))}synchronousGetItems(e=7){const t=e>0?e:7,r=Date.now(),s=[],n=[];for(let e of this.memoryStore)if(e.timeToBeProcessedAfter<=r&&(s.push(Ve({},e)),e.timeToBeProcessedAfter+=6e4,e.retryAttempts+=1,e.retryAttempts>=this.options.maxAttempts&&n.push(e)),s.length>=t)break;return n.forEach((e=>{const t=this.memoryStore.indexOf(e);this.memoryStore.splice(t,1)})),{items:s,numberOfDeletedItems:n.length}}deleteItems(e){return this.memoryStore=this.memoryStore.filter((t=>!e.includes(t.id))),Promise.resolve(void 0)}getItemCount(){const e=Date.now(),t=this.memoryStore.filter((t=>t.timeToBeProcessedAfter<=e)).length;return Promise.resolve(t)}async processItems(e,t){const r=this.synchronousGetItems(t),{items:s}=r,n=(0,Ae.Z)(r,$e),i=s.map((e=>e.id));try{const t=await e(s,n);return await this.deleteItems(i),t}catch(e){throw new Ee(e)}}storeType(){return ve.MEMORY}addItems(e){this.memoryStore.push(...e),this.memoryStore.sort((function(e,t){return e.timeAdded-t.timeAdded}))}evictEventsIfNeeded(e){const t=this.memoryStore.length;if(t>e){const r=t-e;return this.memoryStore.splice(0,r),r}return 0}}const ze=class{constructor(e,t={}){if(this.namespace=e,this.options=Pe(t),!e||0===e.length||"string"!=typeof e)throw new Error("Invalid namespace provided");this.resilience=this.getResilienceMechanism(e,t)}getResilienceMechanism(e,t){if(!t.useMemory)try{return new Ze(e,t)}catch(e){var r;if(!(e instanceof _e))null===(r=t.logger)||void 0===r||r.warn("Attempted to create IndexedDbResilience but failed. Using memory instead.")}return new He(this.namespace,t)}addItem(e,t,r=we.ABANDON){return this.runOrFailOver((()=>this.resilience.addItem(e,t,r)))}bulkAddItem(e,t=we.ABANDON){return this.runOrFailOver((()=>this.resilience.bulkAddItem(e,t)))}getItems(e){return this.runOrFailOver((()=>this.resilience.getItems(e)))}deleteItems(e){return this.runOrFailOver((()=>this.resilience.deleteItems(e)))}getItemCount(){return this.runOrFailOver((()=>this.resilience.getItemCount()))}processItems(e,t){return this.runOrFailOver((()=>this.resilience.processItems(e,t)))}storeType(){return this.resilience.storeType()}async runOrFailOver(e){try{return await e()}catch(t){if(Te(t))throw t;return this.resilience.storeType()===ve.INDEXEDDB&&await this.failOver(),e()}}async failOver(){const e=this.resilience,t=new He(this.namespace,this.options);this.resilience=t;try{const{items:r}=await e.getItems(this.options.maxEventLimit);if(r.length>0){const s=(await t.bulkAddItemWrapperType(r,we.IGNORE)).items.map((e=>e.id));await e.deleteItems(s)}}catch(e){this.options.logger.warn("Unexpected error from ResilienceDb, switching to MemoryDb")}}};let We=function(e){return e.INDEXEDDB="indexeddb",e.MEMORY="memory",e}({}),Ge=function(e){return e[e.ONLINE=0]="ONLINE",e[e.OFFLINE=1]="OFFLINE",e}({});class Ke{constructor(){(0,s.Z)(this,"itemsDiscardedByRetry",0),(0,s.Z)(this,"eventCount",0),(0,s.Z)(this,"itemsDiscardedByOverflow",0),(0,s.Z)(this,"resilienceMechanism",We.INDEXEDDB),(0,s.Z)(this,"localstorageNumberOfQueuesPurged",0),(0,s.Z)(this,"localstorageNumberOfFullReclaims",0),(0,s.Z)(this,"localstorageNumberOfPartialReclaims",0),(0,s.Z)(this,"localstorageNumberOfFailedReclaims",0)}addToItemsDiscardedByRetryCounter(e=1){this.itemsDiscardedByRetry+=e}addToEventCount(){this.eventCount++}addToItemsDiscardedByOverflowCounter(e=1){this.itemsDiscardedByOverflow+=e}setResilienceMechanism(e){this.resilienceMechanism=e}addToReclaimMetrics(e){this.localstorageNumberOfFullReclaims+=e.fullReclaims,this.localstorageNumberOfPartialReclaims+=e.partialReclaims,this.localstorageNumberOfFailedReclaims+=e.failedReclaims}addToPurgedQueuesMetrics(e){this.localstorageNumberOfQueuesPurged+=e}subtractFromMetrics(e){this.itemsDiscardedByRetry=this.subtractFromCount(this.itemsDiscardedByRetry,e.itemsDiscardedByRetry),this.eventCount=this.subtractFromCount(this.eventCount,e.eventCount),this.itemsDiscardedByOverflow=this.subtractFromCount(this.itemsDiscardedByOverflow,e.itemsDiscardedByOverflow),this.localstorageNumberOfFullReclaims=this.subtractFromCount(this.localstorageNumberOfFullReclaims,e.fullReclaims),this.localstorageNumberOfPartialReclaims=this.subtractFromCount(this.localstorageNumberOfPartialReclaims,e.partialReclaims),this.localstorageNumberOfFailedReclaims=this.subtractFromCount(this.localstorageNumberOfFailedReclaims,e.failedReclaims),this.localstorageNumberOfQueuesPurged=this.subtractFromCount(this.localstorageNumberOfQueuesPurged,e.localstorageQueuesPurged)}subtractFromCount(e,t){return Math.max(e-(t||0),0)}getMetricsPayload(){return{itemsDiscardedByRetry:this.itemsDiscardedByRetry,eventCount:this.eventCount,itemsDiscardedByOverflow:this.itemsDiscardedByOverflow,resilienceMechanism:this.resilienceMechanism,localstorageQueuesPurged:this.localstorageNumberOfQueuesPurged,fullReclaims:this.localstorageNumberOfFullReclaims,partialReclaims:this.localstorageNumberOfPartialReclaims,failedReclaims:this.localstorageNumberOfFailedReclaims}}}let Qe=null;const Ye=()=>(Qe||(Qe=new Ke),Qe);class Je{constructor(e){"undefined"!=typeof window&&(window.addEventListener("offline",(()=>e(Ge.OFFLINE))),window.addEventListener("online",(()=>e(Ge.ONLINE))))}getNetworkStatus(){return window.navigator.onLine?Ge.ONLINE:Ge.OFFLINE}}let Xe=function(e){return e.IDLE="idle",e.RUNNING="running",e.COMPLETED="completed",e.TIMED_OUT="timedOut",e}({}),et=function(e){return e.EXECUTE="execute",e.COMPLETE="complete",e.TIMEOUT="timeout",e}({});class tt{constructor(e){if((0,s.Z)(this,"timeoutHandle",void 0),(0,s.Z)(this,"callbackStatus",Xe.IDLE),!(e>0))throw new Error("CallbackWithTimeout requires timeout period higher than 0");this.timeoutPeriod=e}transitionCallbackStatus(e,t){switch(e){case Xe.IDLE:case Xe.TIMED_OUT:case Xe.COMPLETED:t===et.EXECUTE&&(this.callbackStatus=Xe.RUNNING);break;case Xe.RUNNING:switch(t){case et.COMPLETE:this.callbackStatus=Xe.COMPLETED;break;case et.TIMEOUT:this.callbackStatus=Xe.TIMED_OUT}break;default:this.callbackStatus=e}}executeCallbackWithTimeout(e,t,r){"undefined"!=typeof window&&(this.transitionCallbackStatus(this.callbackStatus,et.EXECUTE),this.timeoutHandle=window.setTimeout((()=>{this.transitionCallbackStatus(this.callbackStatus,et.TIMEOUT),r()}),this.timeoutPeriod),e((e=>{this.cancelTimeout(),this.getCallbackStatus()!==Xe.TIMED_OUT&&(this.transitionCallbackStatus(this.callbackStatus,et.COMPLETE),t(e))})))}getCallbackStatus(){return this.callbackStatus}cancelTimeout(){"undefined"!=typeof window&&this.timeoutPeriod>0&&this.timeoutHandle&&(window.clearTimeout(this.timeoutHandle),this.timeoutHandle=void 0)}}let rt=function(e){return e[e.NOOP=0]="NOOP",e[e.SUCCESS=1]="SUCCESS",e[e.ERROR=2]="ERROR",e}({});const st=1e3,nt=3e4,it=2,ot=0,at=500,ct=5e3;let lt=function(e){return e[e.NONE=0]="NONE",e[e.IMMEDIATE=1]="IMMEDIATE",e[e.WAIT=2]="WAIT",e}({});class dt{constructor(e,t){(0,s.Z)(this,"schedule",(({immediate:e}={immediate:!1})=>{"undefined"!=typeof window&&(this.operationInFlight?e?this.queuedSchedule=lt.IMMEDIATE:this.queuedSchedule!==lt.IMMEDIATE&&(this.queuedSchedule=lt.WAIT):(e||this.options.waitInterval<=0)&&0===this.failureCount?(this.clearTimeout(),this.run()):this.failureCount>0&&null===this.scheduledTimeout?this.scheduledTimeout=window.setTimeout(this.run,this.calculateBackoff()):null===this.scheduledTimeout&&(this.scheduledTimeout=window.setTimeout(this.run,this.options.waitInterval)))})),(0,s.Z)(this,"stop",(()=>{this.clearTimeout(),this.queuedSchedule=lt.NONE})),(0,s.Z)(this,"getFailureCount",(()=>this.failureCount)),(0,s.Z)(this,"getCallbackStatus",(()=>this.callbackTimer.getCallbackStatus())),(0,s.Z)(this,"clearTimeout",(()=>{"undefined"!=typeof window&&null!==this.scheduledTimeout&&(window.clearTimeout(this.scheduledTimeout),this.scheduledTimeout=null)})),(0,s.Z)(this,"run",(()=>{this.operationInFlight=!0,this.clearTimeout();try{this.callbackTimer.executeCallbackWithTimeout(this.callback,this.done,(()=>this.done(rt.ERROR)))}catch(e){this.done(e)}})),(0,s.Z)(this,"done",(e=>{this.operationInFlight=!1,e===rt.ERROR||this.callbackTimer.getCallbackStatus()===Xe.TIMED_OUT?(this.failureCount++,this.clearTimeout()):e===rt.SUCCESS&&(this.failureCount=0),this.processQueuedSchedule()})),(0,s.Z)(this,"processQueuedSchedule",(()=>{if(this.queuedSchedule!==lt.NONE){const e=this.queuedSchedule===lt.IMMEDIATE;this.queuedSchedule=lt.NONE,this.schedule({immediate:e})}else this.failureCount>0&&this.schedule()})),(0,s.Z)(this,"calculateBackoff",(()=>{const{minRetryDelay:e,maxRetryDelay:t,backoffFactor:r,backoffJitterPercentage:s}=this.options;let n=e*r**this.failureCount;if(s){const e=Math.random(),t=Math.floor(e*s*n);Math.floor(10*e)<5?n-=t:n+=t}return Number(Math.min(n,t).toPrecision(1))})),this.options={minRetryDelay:e.minRetryDelay||st,maxRetryDelay:e.maxRetryDelay||nt,backoffFactor:e.backoffFactor||it,backoffJitterPercentage:e.backoffJitterPercentage||ot,waitInterval:void 0!==e.waitInterval?e.waitInterval:at,callbackTimeoutPeriod:e.callbackTimeoutPeriod||ct},this.scheduledTimeout=null,this.failureCount=0,this.callback=t,this.operationInFlight=!1,this.queuedSchedule=lt.NONE,this.callbackTimer=new tt(this.options.callbackTimeoutPeriod)}}function ut(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ut(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const pt=6e4,ht={backoffFactor:0,backoffJitterPercentage:0,flushWaitMs:pt,minRetryDelay:pt,maxRetryDelay:pt},ft=2,gt=.2,yt=7,bt=!1,vt=500,wt=10,_t=1e3,Ct=3e4,It=1e3;class Ot{constructor(e,t,r,s){this.queuePrefix=e,this.resilience=new ze(t,{logger:s,maxAttempts:null==r?void 0:r.maxAttempts,maxEventLimit:null==r?void 0:r.maxItems}),this.options=this.buildOptions(r),this.scheduler=new dt(mt(mt({},this.options),{},{waitInterval:null!=r&&r.flushBeforeUnload?0:this.options.flushWaitMs}),this.scheduleCallback.bind(this)),this.longPollingScheduler=new dt(mt(mt({},ht),{},{waitInterval:ht.flushWaitMs}),this.scheduleLongCallBack.bind(this)),this.metricsCollector=Ye(),this.networkStatus=new Je((e=>{e===Ge.OFFLINE?this.scheduler.stop():this.checkEventCountAndReschedule()}))}start(e){this.batchFlushCallback=e,this.longPollingScheduler.schedule()}stop(){this.scheduler.stop(),this.longPollingScheduler.stop()}async addItem(e){const t=JSON.parse(JSON.stringify(e)),{numberOfEvictedItems:r}=await this.resilience.addItem(t,{},we.EVICT);this.scheduler.schedule(),this.metricsCollector.addToEventCount(),r>0&&this.metricsCollector.addToItemsDiscardedByOverflowCounter(r)}getGlobalRetryCount(){return this.scheduler.getFailureCount()}async scheduleCallback(e){if(this.networkStatus.getNetworkStatus()!==Ge.OFFLINE)try{e(await this.resilience.processItems(this.flush.bind(this),this.options.batchFlushSize))}catch(t){if(t.name===Oe)return void e(rt.ERROR)}finally{await this.checkEventCountAndReschedule()}else e(rt.NOOP)}async checkEventCountAndReschedule(){const e=await this.resilience.getItemCount();e>0&&this.scheduler.schedule({immediate:e>=this.options.batchFlushSize})}async scheduleLongCallBack(e){const t=(e=>{if("string"!=typeof e||0===e.length)return 0;try{const t=Object.keys(localStorage).filter((t=>t&&t.startsWith(`${e}.`)||!1)).map((e=>e.split("."))).filter((e=>3===e.length&&ae.includes(e[2]))).reduce(((e,t)=>{const[,r,s]=t;return void 0===e[r]&&(e[r]={}),e[r][s]=!0,e}),{}),r=Object.keys(t).filter((e=>!0!==t[e][ne.ACK]));return r.forEach((t=>{const{queue:r,inProgress:s,reclaimStart:n,reclaimEnd:i}=oe(e,t);localStorage.removeItem(s),localStorage.removeItem(r),localStorage.removeItem(n),localStorage.removeItem(i)})),r.length}catch(e){}return 0})(this.queuePrefix);this.metricsCollector.addToPurgedQueuesMetrics(t);const r=await pe(this.queuePrefix,(async e=>{const t=e.map((e=>({item:e.item,retryAttempts:e.attemptNumber,id:e.id}))),{items:r}=await this.resilience.bulkAddItem(t,we.IGNORE);return r.length===t.length?{status:"successful"}:{status:"partial",acceptedItemIds:r.map((e=>e.id))}}));this.metricsCollector.addToReclaimMetrics(r),await this.checkEventCountAndReschedule(),e(rt.SUCCESS),this.longPollingScheduler.schedule()}flush(e,t){this.metricsCollector.setResilienceMechanism(this.resilience.storeType());const{batchFlushCallback:r}=this;if(!r)throw new Error("batchFlushCallback has not been set. Call PullBatchableQueue#start first.");return new Promise(((s,n)=>{if(e.length<=0)return void s(rt.NOOP);const i=e.map((e=>{const t=e.item;return e.retryAttempts>0&&t.msg&&(t.msg._metadata||(t.msg._metadata={}),t.msg._metadata.failedAttempts=e.retryAttempts),t}));r(i,(e=>{e?(t.numberOfDeletedItems>0&&this.metricsCollector.addToItemsDiscardedByRetryCounter(t.numberOfDeletedItems),n(e)):s(rt.SUCCESS)}))}))}buildOptions(e){return{backoffFactor:(null==e?void 0:e.backoffFactor)||ft,backoffJitterPercentage:void 0!==(null==e?void 0:e.backoffJitterPercentage)?e.backoffJitterPercentage:gt,batchFlushSize:(null==e?void 0:e.batchFlushSize)||yt,flushBeforeUnload:(null==e?void 0:e.flushBeforeUnload)||bt,flushWaitMs:(null==e?void 0:e.flushWaitMs)||vt,maxItems:(null==e?void 0:e.maxItems)||_t,maxAttempts:(null==e?void 0:e.maxAttempts)||wt,maxRetryDelay:(null==e?void 0:e.maxRetryDelay)||Ct,minRetryDelay:(null==e?void 0:e.minRetryDelay)||It}}}let Et=function(e){return e.IDENTIFY="identify",e.PAGE="page",e.TRACK="track",e}({});function St(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function kt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?St(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):St(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}async function Tt(e,t){try{const r=await t;return e.map((e=>function(e,t){if(!(t&&t instanceof Function))return e;if(e.msg.type===Et.PAGE||e.msg.type===Et.TRACK){const r=t();r&&Array.isArray(r)&&(e.msg.properties=kt(kt({},e.msg.properties),{},{xid:r}))}else if(e.msg.traits&&e.msg.type===Et.IDENTIFY){const r=t();r&&Array.isArray(r)&&(e.msg.traits=kt(kt({},e.msg.traits),{},{xid:r}))}return e}(e,r)))}catch(t){return e}}var At=r("./node_modules/memoize-one/dist/memoize-one.esm.js");function jt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}const Pt=async e=>{var t;const r=null===(t=Dt(e))||void 0===t?void 0:t.signal,n=Nt(e.url),i=await fetch(e.url,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(e.batch),signal:r},n));if(429===i.status||i.status>=500&&i.status<600)throw new Error(`HTTP Error ${i.status} (${i.statusText})`);return i},Dt=e=>{if(e.abortController)return e.abortController;if(e.timeout){const t=new AbortController;return setTimeout((()=>{t.abort()}),e.timeout),t}},Nt=(0,At.Z)((e=>new URL(e).origin===location.origin?{}:{mode:"cors",credentials:"include"}));var xt=r("./node_modules/date-fns/esm/differenceInDays/index.js"),Lt=r("./node_modules/@atlassian/browser-storage-controls/node_modules/js-cookie/src/js.cookie.js"),Rt=r.n(Lt);let Mt=function(e){return e.AWC_TLD_TEST="AWC_TLD_TEST",e.AWC_ANALYTICS_DEBUG="AWC_ANALYTICS_DEBUG",e.AJS_ANONYMOUS_ID="AJS_ANONYMOUS_ID",e}({});class Ft{constructor(e,t){this.key=e,this.options=t}getAttributes(){return this.options}getKey(){return this.key}}const Zt={[Mt.AWC_TLD_TEST]:new Ft("__awc_tld_test__",{expires:365,secure:"https:"===window.location.protocol,path:"/"}),[Mt.AWC_ANALYTICS_DEBUG]:new Ft("atlassian_analytics_debug",{expires:365,secure:"https:"===window.location.protocol,path:"/"}),[Mt.AJS_ANONYMOUS_ID]:new Ft("ajs_anonymous_id",{expires:365,secure:"https:"===window.location.protocol,path:"/"})};const Ut=new class{constructor(){(0,s.Z)(this,"_data",{}),(0,s.Z)(this,"length",0),(0,s.Z)(this,"setItem",((e,t)=>(this._data[e]=t,this.length=Object.keys(this._data).length,t))),(0,s.Z)(this,"getItem",(e=>e in this._data?this._data[e]:null)),(0,s.Z)(this,"removeItem",(e=>(e in this._data&&delete this._data[e],this.length=Object.keys(this._data).length,null))),(0,s.Z)(this,"clear",(()=>{this._data={},this.length=0})),(0,s.Z)(this,"key",(e=>Object.keys(this._data)[e]))}},Bt="awcInMemoryStorageFallback";function $t(e){const t="test_value";if(!e)return!1;try{const r="awc.storage.support";e.setItem(r,t);const s=e.getItem(r);return e.removeItem(r),s===t}catch(e){return!1}}class qt{constructor(e,t={}){(0,s.Z)(this,"getStore",(()=>this._store)),(0,s.Z)(this,"getItem",(e=>this._store.getItem(this.createKey(e)))),(0,s.Z)(this,"removeItem",(e=>this._store.removeItem(this.createKey(e)))),(0,s.Z)(this,"setItem",((e,t)=>{try{this._store.setItem(this.createKey(e),t)}catch(r){(function(e){let t=!1;if(e.code)switch(e.code){case 22:t=!0;break;case 1014:"NS_ERROR_DOM_QUOTA_REACHED"===e.name&&(t=!0)}else-2147024882===e.number&&(t=!0);return t})(r)&&(this.swapToInMemory(),this._store.setItem(this.createKey(e),t))}})),(0,s.Z)(this,"swapToInMemory",(()=>{if(this._store===Ut||"undefined"==typeof window)return;const e=Object.keys(this._store||{});let t;$t(window[Bt])?t=window[Bt]:(t=Ut,window[Bt]||(window[Bt]=Ut)),e.forEach((e=>{if(0===e.indexOf(this.getPrefix())){const r=this._store.getItem(e);r&&t.setItem(e,r)}})),this._store=t})),(0,s.Z)(this,"clear",(()=>this._store.clear())),(0,s.Z)(this,"key",(e=>this._store.key(e))),(0,s.Z)(this,"getPrefix",(()=>this._prefix)),(0,s.Z)(this,"createKey",(e=>this._prefix?`${this.getPrefix()}.${e}`:e)),this.options=t;const r=[];(void 0===t.useStoragePrefix||t.useStoragePrefix)&&r.push("awc"),t.envPrefix&&t.envPrefix!==n.PROD&&r.push(t.envPrefix),this._prefix=r.join("-"),$t(e)?this._store=e:this.swapToInMemory()}}const Vt=class extends qt{constructor(e){let t;try{t=window.localStorage||Ut}catch(e){t=Ut}super(t,e)}};class Ht{constructor(){this.safeStorage=new Vt({useStoragePrefix:!1})}set(e,t){return this.safeStorage.setItem(e,t),t}get(e){return this.safeStorage.getItem(e)||void 0}remove(e){this.safeStorage.removeItem(e)}}const zt=Zt.AWC_TLD_TEST.getKey(),Wt="tld_test",Gt=(0,At.Z)((()=>{if("undefined"==typeof location)return"";const{hostname:e}=location,t=e.split(".");for(let e=1;e<=t.length;e++){const r=`.${t.slice(-1*e).join(".")}`;if(Rt().set(zt,Wt,{domain:r}),Rt().get(zt)===Wt)return Rt().remove(zt,{domain:r}),r}return e}));function Kt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function Qt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kt(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class Yt{constructor(e){this.cookieLike=((e=!1)=>!e&&!("file:"===location.protocol||"chrome-extension:"===location.protocol))(e)?Rt():new Ht}set(e,t,r){if(Zt[e])return this.cookieLike.set(Zt[e].getKey(),t,Qt(Qt({},Zt[e].getAttributes()),{},{domain:Gt()},r));console.warn(`Unknown cookie key ${e} provided, not set.`)}get(e){if(Zt[e])return this.cookieLike.get(Zt[e].getKey());console.warn(`Unknown cookie key ${e} provided, not fetched.`)}remove(e,t){Zt[e]?this.cookieLike.remove(Zt[e].getKey(),Qt({},t)):console.warn(`Unknown cookie key ${e} provided, not removed.`)}}const Jt="SAFE",Xt="UNSAFE",er="NOT_FOUND",tr="LOCAL_STORAGE";class rr{constructor(e){this.store=new Vt({useStoragePrefix:!1}),this.cookie=new Yt(e)}getUserId(){return this.userId||null}setUserId(e){this.userId=e}getAnonymousId(e){return this.getAnonymousIdFromLocalStorageAndUpdateCookieIfStale()||this.getAnonymousIdFromCookieAndUpdateLocalStorage()||this.generateNewAnonymousId(e)}setAnonymousId(e){const t=JSON.stringify(e);return this.cookie.set(Mt.AJS_ANONYMOUS_ID,t),this.lastAnonymousIdCookieUpdate=Date.now(),this.store.setItem(Zt.AJS_ANONYMOUS_ID.getKey(),t)}getAnonymousIdFromStorage(e){const t=e===tr?this.store.getItem(Zt.AJS_ANONYMOUS_ID.getKey()):this.cookie.get(Mt.AJS_ANONYMOUS_ID);if(t){const e={type:Xt,anonymousId:t};try{const r=JSON.parse(t);return r&&"string"==typeof r?{type:Jt,anonymousId:r}:e}catch(t){return e}}return{type:er}}getAnonymousIdFromLocalStorageAndUpdateCookieIfStale(){const e=this.getAnonymousIdFromStorage(tr);let t=!1;switch((!this.lastAnonymousIdCookieUpdate||(0,xt.Z)(new Date,new Date(this.lastAnonymousIdCookieUpdate))>=7)&&(t=!0),e.type){case Jt:return t&&this.setAnonymousId(e.anonymousId),e.anonymousId;case Xt:return e.anonymousId;default:return null}}getAnonymousIdFromCookieAndUpdateLocalStorage(){const e=this.getAnonymousIdFromStorage("COOKIE");switch(e.type){case Jt:case Xt:return this.store.setItem(Zt.AJS_ANONYMOUS_ID.getKey(),JSON.stringify(e.anonymousId)),e.anonymousId;default:return null}}generateNewAnonymousId(e=b()){const t=e();return this.setAnonymousId(t),t}}var sr=r("./node_modules/@segment/isodate-traverse/lib/index.js"),nr=r.n(sr);function ir(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function or(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ir(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const ar=e=>{const t=cr(e);return nr()(t)},cr=e=>{if(null===e||"object"!=typeof e)return e;const t={};return Object.keys(e).forEach((r=>{const s=lr(e,r);void 0!==s&&(Array.isArray(s)?t[r]=s.map((e=>cr(e))):t[r]="object"==typeof s&&null!==s?cr(s):s)})),t},lr=(e,t)=>e[t];function dr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function ur(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dr(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class mr{constructor(e){var t;(0,s.Z)(this,"sendEvents",(async(e,t)=>{const r=this.resilienceQueue.getGlobalRetryCount(),s=this.metrics.getMetricsPayload(),n=ur(ur({},s),{},{httpRetryCount:r});for(let e in n)0===n[e]&&delete n[e];const i=await this.attachXIDs(e),o=(new Date).toISOString(),a={batch:i.map((e=>(e.msg.sentAt=o,e.msg))),sentAt:o,metadata:n};try{const e=await Pt({url:this.gasv3BatchUrl,batch:a,timeout:this.options.requestTimeout});this.metrics.subtractFromMetrics(s),t(null,e)}catch(e){t(e,null)}})),this.options=ur(ur({},e),{},{requestTimeout:e.requestTimeout||1e4,retryQueueOptions:e.retryQueueOptions||{},logger:e.logger||console,disableCookiePersistence:e.disableCookiePersistence||!1}),this.user=new rr(null===(t=this.options)||void 0===t?void 0:t.disableCookiePersistence),this.xidPromiseCallback=e.xidPromiseGetter(),this.gasv3BatchUrl=`${e.apiHostProtocol}://${e.apiHost}/batch`,this.metrics=Ye(),this.resilienceQueue=((e,t,r,s)=>new Ot(e,t,r||{},s))(e.retryQueuePrefix,e.product,this.options.retryQueueOptions,this.options.logger),this.resilienceQueue.start(this.sendEvents)}getUser(){return this.user}async track(e,t,r,s){const n=ur(ur({},this.buildBaseEvent(r,Et.TRACK,t)),{},{type:Et.TRACK,properties:ar(t),event:e}),i=ur(ur({},n),{},{messageId:this.createMessageId()}),o=this.packageEvent(i);await this.resilienceQueue.addItem(o),s&&s()}async page(e,t,r,s){const n=ur(ur({},this.buildBaseEvent(r,Et.PAGE,t)),{},{type:Et.PAGE,properties:ar(t),name:e}),i=ur(ur({},n),{},{messageId:this.createMessageId()}),o=this.packageEvent(i);await this.resilienceQueue.addItem(o),s&&s()}async identify(e,t,r,s){const n=ur(ur({},this.buildBaseEvent(r,Et.IDENTIFY,t)),{},{type:Et.IDENTIFY,traits:ar(t)}),i=ur(ur({},n),{},{messageId:this.createMessageId()}),o=this.packageEvent(i);await this.resilienceQueue.addItem(o),s&&s()}buildBaseEvent(e,t,r){const s=(e=>or(or({},e.context),{},{userAgent:navigator.userAgent}))(ar(e));return{context:s,timestamp:(new Date).toISOString(),type:t,userId:this.user.getUserId(),anonymousId:r.anonymousId||this.user.getAnonymousId()}}createMessageId(){return`ajs-${b()()}`}packageEvent(e){const{apiHost:t,apiHostProtocol:r}=this.options;return{headers:{"Content-Type":"text/plain"},msg:e,url:`${r}://${t}/${e.type.charAt(0)}`}}async attachXIDs(e){return this.xidPromiseCallback?Tt(e,this.xidPromiseCallback):Promise.resolve(e)}}var pr=r("./node_modules/query-string/index.js");const hr=e=>window.history.replaceState({},"",e),fr=(e,t=hr)=>{const r=window.location.href,s=window.location.hash,n=""!==s?r.replace(s,""):r,{url:i,query:o}=(0,pr.parseUrl)(n),a=(c=o,l=e,Object.keys(c).filter((e=>l(c[e],e))).reduce(((e,t)=>(e[t]=c[t],e)),{}));var c,l;if(Object.keys(a).length>0){const r=((e,t)=>Object.keys(e).filter((r=>!t(e[r],r))).reduce(((t,r)=>(t[r]=e[r],t)),{}))(o,e);if(Object.keys(r).length>0){t(`${i}?${(0,pr.stringify)(r)}${s}`)}else t(`${i}${s}`)}return a};class gr{constructor(){(0,s.Z)(this,"handleOriginParameters",((e,t)=>{const r=Object.keys(e);if(!(r.length>0))throw new Error("Empty parameter mapping provided");const s=r.filter((e=>Object.values(p).indexOf(e)<0));if(s.length>0)throw new Error(`Invalid Origin Tracing Parameter(s) supplied: ${s.join()}!`);const n=fr(((e,t)=>r.indexOf(t)>=0),t);return Object.keys(n).map((t=>({[t]:e[t](n[t])}))).reduce(((e,t)=>Object.assign(e,t)),{})})),this._originStore={}}}const yr="session.id",br="session.expiry",vr=/^\d+$/,wr=()=>{};class _r{constructor(e={}){(0,s.Z)(this,"_generateNewSessionId",(()=>{const e=Date.now().toString();return this._safeLocalStorage.setItem(yr,e),this._onNewSessionStarted&&this._onNewSessionStarted(),e})),(0,s.Z)(this,"_updateSessionExpiry",(()=>{const e=Date.now()+this._sessionExpiryTime;return this._safeLocalStorage.setItem(br,e.toString()),e})),(0,s.Z)(this,"_debouncedUpdateSessionExpiry",(e=>{const{_updateSessionExpiry:t}=this;if(e<Date.now()+this._sessionExpiryDebounceThresholdPercentage*this._sessionExpiryTime)return t();this._sessionExpiryDebounceTimer&&clearTimeout(this._sessionExpiryDebounceTimer),this._sessionExpiryDebounceTimer=setTimeout((()=>{t()}),this._sessionExpiryDebounce)})),this._sessionExpiryTime=e.sessionExpiryTime||18e5,this._sessionExpiryDebounce=e.sessionExpiryDebounce||5e3,this._sessionExpiryDebounceThresholdPercentage=e.sessionExpiryDebounceThresholdPercentage||.9,this._onNewSessionStarted=e.onNewSessionStarted?e.onNewSessionStarted:wr,this._safeLocalStorage=new Vt}getCurrentSessionId(){const e=this._safeLocalStorage.getItem(yr),t=parseInt(this._safeLocalStorage.getItem(br)||"0",10)||0;return this._debouncedUpdateSessionExpiry(t),!e||t<=Date.now()||Number.isNaN(t)?this._generateNewSessionId():vr.test(e)?e:this._generateNewSessionId()}}const Cr=class extends qt{constructor(e){let t;try{t=window.sessionStorage||Ut}catch(e){t=Ut}super(t,e)}},Ir="tab.id";class Or{constructor(){(0,s.Z)(this,"_generateNewTabId",(()=>{const e=b()();return this._safeSessionStorage.setItem(Ir,e),e})),this._safeSessionStorage=new Cr}getCurrentTabId(){let e=this._safeSessionStorage.getItem(Ir);return e||(e=this._generateNewTabId()),e}}function Er(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function Sr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Er(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const kr="taskSessions",Tr="taskSessionsInit",Ar="awc.";class jr{constructor(){(0,s.Z)(this,"_taskSessionsNotRecentlyInitialised",(e=>null===this._safeSessionStorage.getItem(kr)||null===this._safeSessionStorage.getItem(Tr)||parseInt(this._safeSessionStorage.getItem(Tr)||"0",10)<e-3e3)),(0,s.Z)(this,"_removeTaskSessionPrefix",((e,t)=>t.split(Ar)[1])),(0,s.Z)(this,"_isTaskSessionQueryParam",((e,t)=>t.startsWith(Ar))),(0,s.Z)(this,"getAllTaskSessions",(()=>{try{return JSON.parse(this._safeSessionStorage.getItem(kr)||"")}catch(e){return{}}})),(0,s.Z)(this,"_writeToSessionStorage",(e=>{try{this._safeSessionStorage.setItem(kr,JSON.stringify(e))}catch(e){}})),(0,s.Z)(this,"_appendTaskSessions",(e=>{const t=this.getAllTaskSessions(),r=null===t?e:Object.assign(t,e);this._writeToSessionStorage(r)})),(0,s.Z)(this,"_safelyRemoveKey",((e,t)=>null===e?{}:(delete e[t],e))),(0,s.Z)(this,"createTaskSession",(e=>{const t=b()(),r={};return r[e]=t,this._appendTaskSessions(r),t})),(0,s.Z)(this,"createTaskSessionWithProvidedId",((e,t)=>{if("string"!=typeof t)throw new TypeError("invalid taskSessionId, must be string");const r={};r[e]=t,this._appendTaskSessions(r)})),(0,s.Z)(this,"completeTaskSession",(e=>{const t=this.getAllTaskSessions(),r=this._safelyRemoveKey(t,e);this._writeToSessionStorage(r)})),(0,s.Z)(this,"formatTaskSessionQueryString",(({uri:e,includedTaskSessions:t})=>{const{url:r,query:s}=(0,pr.parseUrl)(e),n=this.getAllTaskSessions(),i=t?(o=n,t.reduce(((e,t)=>(t in o&&(e[t]=o[t]),e)),{})):V(n,Object.values(p));var o;if(0===Object.keys(i).length)return e;const a=Sr(Sr({},q(i,((e,t)=>Ar+t))),s);return`${r}?${(0,pr.stringify)(a)}`})),(0,s.Z)(this,"stripQueryParameters",(()=>{const e=q(fr(this._isTaskSessionQueryParam),this._removeTaskSessionPrefix);this._appendTaskSessions(e)}));const e=Date.now();this._safeSessionStorage=new Cr;try{this._taskSessionsNotRecentlyInitialised(e)&&(this._writeToSessionStorage({}),this._safeSessionStorage.setItem(Tr,e.toString()))}catch(e){}}}const Pr=Zt.AWC_ANALYTICS_DEBUG.getKey(),Dr="synthetic";const Nr=class{constructor(){(0,s.Z)(this,"_bind",(()=>{"undefined"==typeof window||window.testAnalytics||(window.testAnalytics={eventCache:[],events:()=>window.testAnalytics.eventCache,clear:()=>{window.testAnalytics.eventCache=[];try{localStorage.removeItem("awc.ui.viewed.last.sent"),localStorage.removeItem("awc-staging.ui.viewed.last.sent"),localStorage.removeItem("awc-dev.ui.viewed.last.sent"),localStorage.removeItem("awc-local.ui.viewed.last.sent")}catch(e){}}})})),(0,s.Z)(this,"_cache",(e=>{"undefined"!=typeof window&&(window.testAnalytics.eventCache.length>=100&&(window.testAnalytics.eventCache=window.testAnalytics.eventCache.slice(1,window.testAnalytics.eventCache.length)),window.testAnalytics.eventCache.push(e))})),(0,s.Z)(this,"_shouldCacheEvent",(()=>this._isDebugCookieEnabled)),(0,s.Z)(this,"saveEvent",(e=>{e&&this._shouldCacheEvent()&&(window.testAnalytics||this._bind(),e.tags instanceof Array?e.tags.push(Dr):e.tags=[Dr],this._cache(e))})),this._isDebugCookieEnabled=(()=>{try{return JSON.parse(Rt().get(Pr)||"false")}catch(e){Rt().remove(Pr)}return!1})(),this._isDebugCookieEnabled&&this._bind()}},xr=["embeddedProduct"];function Lr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function Rr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lr(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class Mr{constructor(e,t,r,n={}){if((0,s.Z)(this,"start",(()=>{this._startInterval(),this._bindEventListeners()})),(0,s.Z)(this,"stop",(()=>{this._stopInterval(),this._unbindEventListeners()})),(0,s.Z)(this,"resetTimers",(()=>{this._intervalId&&(this.stop(),this.start())})),(0,s.Z)(this,"_bindEventListeners",(()=>{"undefined"!=typeof window&&(window.addEventListener("focus",this._focusListener),window.addEventListener("blur",this._blurListener))})),(0,s.Z)(this,"_unbindEventListeners",(()=>{"undefined"!=typeof window&&(window.removeEventListener("focus",this._focusListener),window.removeEventListener("blur",this._blurListener))})),(0,s.Z)(this,"_startInterval",(()=>{clearInterval(this._intervalId),this._intervalId=setInterval(this._handleInterval,this._delay)})),(0,s.Z)(this,"_stopInterval",(()=>{this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null)})),(0,s.Z)(this,"_getProductKey",((e,t)=>{let r=e;return t&&(r+=`-${t}`),r})),(0,s.Z)(this,"_getLastSentTimestamp",((e,t,r)=>(((this._parseLocalStorageData()||{})[r]||{})[t]||{})[e]||null)),(0,s.Z)(this,"_parseLocalStorageData",(()=>{const e=this._safeLocalStorage.getItem(this._storageKey);try{return JSON.parse(e||"")}catch(e){return this._safeLocalStorage.removeItem(this._storageKey),null}})),(0,s.Z)(this,"_setLastSentTimestamp",((e,t,r)=>{const s=this._parseLocalStorageData()||{},n=s[r]||{},i=n[t]||{};i[e]=Date.now(),n[t]=i,s[r]=n,this._safeLocalStorage.setItem(this._storageKey,JSON.stringify(s))})),(0,s.Z)(this,"_shouldSendEvent",((e,t,r,s)=>{if(!document.hasFocus())return!1;if(t!==c.NONE&&!r||!s)return!1;return Date.now()-this._getLastSentTimestamp(e,r,s)>this._throttle})),(0,s.Z)(this,"_handleInterval",(()=>{const e=this._getContext(),{embeddedProduct:t}=e,r=(0,Ae.Z)(e,xr);this._sendEvent(this._product,r),t&&this._sendEvent(t,r,!0)})),(0,s.Z)(this,"_sendEvent",((e,t,r=!1)=>{const{subproduct:s,tenantIdType:n,tenantId:i,userId:o,lastScreenEvent:a,attributes:c}=t,l=this._getProductKey(e,s);if(this._shouldSendEvent(l,n,i,o)){this._setLastSentTimestamp(l,i,o);const t=this._createEvent(e,s,r,a,c);this._onEvent(t)}})),(0,s.Z)(this,"_createEvent",((e,t,r,s,n)=>{const i={product:e,source:"ui",action:"viewed",actionSubject:"ui",attributes:n};return r&&(i.subproduct=null,i.version=null,i.attributes=Rr(Rr({},i.attributes),{},{embeddedInEnv:this._productInfo.env,embeddedInProduct:this._productInfo.product,embeddedInSubproduct:t,embeddedInVersion:this._productInfo.version,embeddedInOrigin:this._productInfo.origin,embeddedInPlatform:this._productInfo.platform})),s&&(i.attributes=Rr(Rr({},i.attributes),{},{lastScreenEvent:{name:s.name,attributes:s.attributes}})),i})),!e)throw new Error("Missing productInfo");if(!e.product)throw new Error("Missing productInfo.product");if(!t)throw new Error("Missing getContext callback");if("function"!=typeof t)throw new Error("Invalid getContext, must be function");if(!r)throw new Error("Missing onEvent callback");if("function"!=typeof r)throw new Error("Invalid onEvent, must be function");this._productInfo=e,this._product=e.product,this._getContext=t,this._onEvent=r,this._delay=n.delay||2e3,this._throttle=n.throttle||36e5,this._storageKey=n.storageKey||"ui.viewed.last.sent",this._safeLocalStorage=new Vt({envPrefix:this._productInfo.env}),this._focusListener=()=>{this._startInterval()},this._blurListener=()=>{this._stopInterval()}}}function Fr(e,t){return e&&"function"==typeof e?()=>{e(t)}:null}let Zr=function(e){return e.XC="xc",e.UID="uid",e}({});const Ur=(e,t)=>{if(e&&t&&"function"==typeof t){const e=()=>new Promise((e=>{setTimeout((()=>e((()=>[{type:Zr.XC,state:"TIMEOUT"},{type:Zr.UID,state:"TIMEOUT"}]))),5e3)})),r=()=>t().catch((()=>()=>[{type:Zr.XC,state:"UNKNOWN"},{type:Zr.UID,state:"UNKNOWN"}]));return Promise.race([r(),e()])}};function Br(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function $r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Br(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Br(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const qr="last.screen.event";class Vr{constructor(e,t={}){if((0,s.Z)(this,"_useStargate",(e=>null==e||e)),(0,s.Z)(this,"_selectHost",(({useStargate:e,env:t,useLegacyUrl:r,perimeter:s})=>e?r?s===g.FEDRAMP_MODERATE&&t===n.STAGING?"api-private.atlassian-fex.com/gasv3/api/v1":t===n.PROD?"api-private.atlassian.com/gasv3/api/v1":"api-private.stg.atlassian.com/gasv3/api/v1":window.location.host+"/gateway/api/gasv3/api/v1":s===g.FEDRAMP_MODERATE&&t===n.STAGING?"as.atlassian-fex.com/api/v1":t===n.PROD?"as.atlassian.com/api/v1":"as.staging.atl-paas.net/api/v1")),(0,s.Z)(this,"_endsWith",((e,t)=>-1!==e.indexOf(t,e.length-t.length))),(0,s.Z)(this,"_changeInternalUserId",((e,t)=>{this.eventProcessor.getUser().setUserId(e),t&&t!==this.eventProcessor.getUser().getAnonymousId()&&this.eventProcessor.getUser().setAnonymousId(t)})),(0,s.Z)(this,"_createSubproductGetter",(e=>O(e,"Cannot get subproduct from the callback. Proceeding without it."))),(0,s.Z)(this,"_createEmbeddedProductGetter",(e=>O(e,"Cannot get embeddedProduct from the callback. Proceeding without it."))),(0,s.Z)(this,"_getLastScreenEvent",(()=>{try{return JSON.parse(this._safeSessionStorage.getItem(qr)||"")}catch(e){return this._safeSessionStorage.removeItem(qr),null}})),(0,s.Z)(this,"_setLastScreenEvent",(e=>{this._safeSessionStorage.setItem(qr,JSON.stringify({name:e.name,attributes:e.attributes}))})),(0,s.Z)(this,"_shouldEventBeDelayed",(e=>{if(!e.tags||-1===e.tags.indexOf("measurement"))return!1;const t=!1!==e.highPriority;return this.eventDelayQueue.isDelayingLowPriorityEvents()&&!t})),(0,s.Z)(this,"_fireEvent",((e,t,r,s)=>{switch(t.eventType){case i.UI:case i.OPERATIONAL:case i.TRACK:return this.eventProcessor.track(e,t,r,s);case i.SCREEN:return this.eventProcessor.page(e,t,r,s);case i.IDENTIFY:return this.eventProcessor.identify(e,t,r,s);default:throw new Error(`No handler has been defined for events of type ${t.eventType}`)}})),(0,s.Z)(this,"_fireDelayedEvent",((e,t,r,s)=>{try{this._changeInternalUserId(s.userId,s.anonymousId),t.tags=[...t.tags||[],"sentWithDelay"],this._fireEvent(e,t,r,void 0)}finally{this._changeInternalUserId(this._userInfo.userId,this._userInfo.anonymousId)}})),(0,s.Z)(this,"_delayEvent",((e,t,r,s,n)=>{this.eventDelayQueue.push(e,t,r,s),n&&n()})),(0,s.Z)(this,"_processEvent",((e,t,r,s)=>(this._testingCache.saveEvent(t),this._shouldEventBeDelayed(t)?(this._delayEvent(e,t,r,this._userInfo,s),Promise.resolve()):this._fireEvent(e,t,r,s)))),(0,s.Z)(this,"setEmbeddedProduct",(e=>{this._productInfo.embeddedProduct=this._createEmbeddedProductGetter(e),this.resetUIViewedTimers()})),(0,s.Z)(this,"clearEmbeddedProduct",(()=>{this._productInfo.embeddedProduct=this._createEmbeddedProductGetter(null)})),(0,s.Z)(this,"setSubproduct",(e=>{this._productInfo.subproduct=this._createSubproductGetter(e),this.resetUIViewedTimers()})),(0,s.Z)(this,"setOriginTracingHandlers",(e=>{const t=this.originTracing.handleOriginParameters(e,this._historyReplaceFn);Object.keys(t).forEach((e=>{void 0!==t[e].taskSessionId&&this.task.createTaskSessionWithProvidedId(e,t[e].taskSessionId)}));const r={};return Object.keys(t).forEach((e=>{t[e].originTracingAttributes?r[e]=t[e].originTracingAttributes:console.warn(`Handling method for origin parameter ${e} has not returned any attributes`)})),Object.keys(t).length>0?this.sendOperationalEvent({action:"landed",actionSubject:"origin",source:"webClient",attributes:{originTracesLanded:r}},(()=>{})):Promise.resolve()})),(0,s.Z)(this,"setTenantInfo",((e,t)=>{if(!e)throw new Error("Missing tenantIdType");if(e!==c.NONE&&!t)throw new Error("Missing tenantId");if(!f(c,e))throw new Error(`Invalid tenantIdType '${e}', must be an tenantType: [${h(c)}]`);this._tenantInfo={tenantIdType:e,tenantId:t}})),(0,s.Z)(this,"clearTenantInfo",(()=>{this._tenantInfo={}})),(0,s.Z)(this,"setOrgInfo",(e=>{if(!e)throw new Error("Missing orgId");this._orgInfo={orgId:e}})),(0,s.Z)(this,"clearOrgInfo",(()=>{this._orgInfo={}})),(0,s.Z)(this,"setWorkspaceInfo",(e=>{if(!e)throw new Error("Missing workspaceId");this._workspaceInfo={workspaceId:e}})),(0,s.Z)(this,"clearWorkspaceInfo",(()=>{this._workspaceInfo={}})),(0,s.Z)(this,"setUserInfo",((e,t)=>{!function(e,t){if(!e)throw new Error("Missing userIdType");if(!t)throw new Error("Missing userId");if(!f(l,e))throw new Error(`Invalid userIdType '${e}', must be an userType: [${h(l)}]`)}(e,t),this._changeInternalUserId(t),this._userInfo={userIdType:e,userId:t,anonymousId:this.eventProcessor.getUser().getAnonymousId()}})),(0,s.Z)(this,"clearUserInfo",(()=>{this._changeInternalUserId(void 0),this._userInfo={anonymousId:this.eventProcessor.getUser().getAnonymousId()}})),(0,s.Z)(this,"getAnonymousId",(()=>this._userInfo.anonymousId)),(0,s.Z)(this,"setUIViewedAttributes",(e=>{if(!e)throw new Error("Missing uiViewedAttributes");if("object"!=typeof e||Array.isArray(e))throw new Error("Invalid uiViewedAttributes type, should be a non array object");this._uiViewedAttributes=$r({},e)})),(0,s.Z)(this,"getUIViewedAttributes",(()=>this._uiViewedAttributes)),(0,s.Z)(this,"clearUIViewedAttributes",(()=>{this._uiViewedAttributes={}})),(0,s.Z)(this,"sendIdentifyEvent",((e,t,r)=>{this.setUserInfo(e,t);const s={userIdType:e,eventType:i.IDENTIFY};return this._processEvent(t,s,this._context,r)})),(0,s.Z)(this,"sendPageEvent",((e,t)=>this.sendScreenEvent(e,t))),(0,s.Z)(this,"sendScreenEvent",((e,t,r)=>{let s,n,i,o;"object"==typeof e?(s=e.name,n=e.attributes,i=e.containers,o=e.tags):(s=e,n=r),function(e){if(!e)throw new Error("Missing name")}(s),G(i);const a=$r({name:s},U(this._productInfo,this._tenantInfo,this._userInfo,n,e.nonPrivacySafeAttributes,o,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,e,i));return this._setLastScreenEvent(a),this._processEvent(s,a,this._context,Fr(t,a))})),(0,s.Z)(this,"sendTrackEvent",((e,t)=>{!function(e){Q(e)}(e);const r=$(this._productInfo,this._tenantInfo,this._userInfo,e,i.TRACK,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo);return this._processEvent(B(e),r,this._context,Fr(t,r))})),(0,s.Z)(this,"sendUIEvent",((e,t)=>{!function(e){Q(e)}(e);const r=$(this._productInfo,this._tenantInfo,this._userInfo,e,i.UI,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo);return this._processEvent(B(e),r,this._context,Fr(t,r))})),(0,s.Z)(this,"sendOperationalEvent",((e,t)=>{!function(e){Q(e)}(e);const r=$(this._productInfo,this._tenantInfo,this._userInfo,e,i.OPERATIONAL,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo);return this._processEvent(B(e),r,this._context,Fr(t,r))})),(0,s.Z)(this,"startUIViewedEvent",(e=>{this.stopUIViewedEvent(),this._uiViewedEvent=new Mr(this._productInfo,(()=>({embeddedProduct:this._productInfo.embeddedProduct(),subproduct:this._productInfo.subproduct(),tenantIdType:this._tenantInfo.tenantIdType,tenantId:this._tenantInfo.tenantId,userId:this._userInfo.userId,lastScreenEvent:this._getLastScreenEvent(),attributes:this._uiViewedAttributes})),(t=>this.sendUIEvent(t,e))),this._uiViewedEvent.start()})),(0,s.Z)(this,"stopUIViewedEvent",(()=>{this._uiViewedEvent&&(this._uiViewedEvent.stop(),this._uiViewedEvent=null)})),(0,s.Z)(this,"resetUIViewedTimers",(()=>{this._uiViewedEvent&&this._uiViewedEvent.resetTimers()})),(0,s.Z)(this,"startApdexEvent",(e=>{this._apdexEvent.start(e)})),(0,s.Z)(this,"getApdexStart",(e=>this._apdexEvent.getStart(e))),(0,s.Z)(this,"stopApdexEvent",((e,t)=>{this._apdexEvent.stop(e,t)})),(0,s.Z)(this,"startLowPriorityEventDelay",((e,t)=>{this.eventDelayQueue.startLowPriorityEventDelay(e,t)})),(0,s.Z)(this,"stopLowPriorityEventDelay",(()=>{this.eventDelayQueue.stopLowPriorityEventDelay()})),(0,s.Z)(this,"onEvent",((e,t)=>{if(!t)throw new Error("Missing analyticsData");if(!t.eventType)throw new Error("Missing analyticsData.eventType");if(t.eventType===i.TRACK)return this.sendTrackEvent(t);if(t.eventType===i.UI)return this.sendUIEvent(t);if(t.eventType===i.OPERATIONAL)return this.sendOperationalEvent(t);if(t.eventType===i.SCREEN)return this.sendScreenEvent(t.name,null,t.attributes);if(t.eventType===i.IDENTIFY)return this.sendIdentifyEvent(t.userIdType,t.userId);throw new Error(`Invalid analyticsData.eventType '${t.eventType}', must be an eventType: [${h(i)}]`)})),!e)throw new Error("Missing productInfo");if(!e.env)throw new Error("Missing productInfo.env");if(!e.product)throw new Error("Missing productInfo.product");if(!f(n,e.env))throw new Error(`Invalid productInfo.env '${e.env}', must be an envType: [${h(n)}]`);if(e.perimeter&&!f(g,e.perimeter))throw new Error(`Invalid productInfo.perimeter '${e.perimeter}', must be an perimeterType: [${h(g)}]`);if(e.origin){if(!f(a,e.origin))throw new Error(`Invalid productInfo.origin '${e.origin}', must be an originType: [${h(a)}]`)}else e.origin=a.WEB;e.platform?function(e){if(!f(o,e.platform))throw new Error(`Invalid productInfo.platform '${e.platform}', must be a platformType: [${h(o)}]`);if(e.origin===a.DESKTOP&&!f(u,e.platform))throw new Error(`Invalid productInfo.platform '${e.platform}', must be one of [mac, linux, windows]`);if(e.origin===a.WEB&&!f(m,e.platform))throw new Error(`Invalid productInfo.platform '${e.platform}', must be one of [web, mobileWeb]`)}(e):e.platform=e.origin===a.WEB?o.WEB:o.DESKTOP,this.logger=t.logger||console,this._productInfo=$r($r({},e),{},{subproduct:this._createSubproductGetter(e.subproduct),embeddedProduct:this._createEmbeddedProductGetter(e.embeddedProduct)}),this._tenantInfo={},this._orgInfo={},this._uiViewedAttributes={},this._context=function(e){const t=window.screen||{};return{context:{locale:e.locale,screen:{width:t.width,height:t.height,density:window.devicePixelRatio},library:{name:"analytics.js",version:"4.19.1"}}}}(this._productInfo),this._safeSessionStorage=new Cr;const r=this._useStargate(t.useStargate),d=t.apiHost||this._selectHost({useStargate:r,env:e.env,useLegacyUrl:t.useLegacyUrl,perimeter:e.perimeter}),p=t.apiHostProtocol||"https",y={maxRetryDelay:6e4,minRetryDelay:t.minRetryDelay||1e3,backoffFactor:2,flushWaitMs:t.flushWaitInterval,flushBeforeUnload:t.flushBeforeUnload},w=`awc-${e.env}`,_=t.disableCookiePersistence||!1;this.eventProcessor=new mr({apiHost:d,apiHostProtocol:p,product:e.product,retryQueuePrefix:w,retryQueueOptions:y,xidPromiseGetter:()=>Ur(t.xidConsent,t.xidPromiseFn),logger:this.logger,disableCookiePersistence:_}),this._userInfo={anonymousId:this.eventProcessor.getUser().getAnonymousId(null==t?void 0:t.customAnonymousIdGenerator)},this._pageVisibility=new v,this._tabTracking=new Or,this._sessionTracking=new _r({sessionExpiryTime:t.sessionExpiryTime,onNewSessionStarted:t.onNewSessionStarted}),this.task=new jr,this.originTracing=new gr,this._apdexEvent=new I(this.sendOperationalEvent,this._pageVisibility),this._historyReplaceFn="function"==typeof t.historyReplaceFn?t.historyReplaceFn:hr,this.eventDelayQueue=new se(this._fireDelayedEvent,t.delayQueueCompressors||[]),this._testingCache=new Nr,this._pageLoadId=b()(),this._workspaceInfo={}}}var Hr=r("./node_modules/@atlaskit/platform-feature-flags/dist/esm/index.js");function zr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function Wr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zr(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Gr,Kr=function(){var e=window.location,t=e.origin,r=function(e){var t="";if(!e)return t;var r=function(t){return new RegExp("^".concat(t,"(/|$)")).test(String(e))};return r("/wiki")&&(t="/wiki"),r("/jira")&&(t="/jira"),r("/compass")&&(t="/compass"),r("/canvas")&&(t="/canvas"),(r("/servicedesk")||r("/jira/servicedesk"))&&(t="/servicedesk"),t}(e.pathname);return{domain:"".concat(t).concat(r),product:r.slice(1)}},Qr=function(e){return Wr(Wr({featureFlagOn:(0,Hr.e)("platform.moonjelly.browser-storage-controls")},Kr()),e&&e)},Yr=function(){var e;return Gr||(Gr=new Vr({env:(e=window.location.hostname,e.includes(".dev.")||e.includes(".stg.")?n.STAGING:e.includes("localhost")||e.includes("ngrok")||e.includes("atlastunnel")?n.DEV:n.PROD),product:"atlassianCookies"},{useLegacyUrl:!1,disableCookiePersistence:!0})),Gr},Jr=function(e){return!e||1===Math.floor(Math.random()*Math.floor(e))};function Xr(e,t,r){Jr(r)&&Yr().sendOperationalEvent({source:"package",actionSubject:"package",action:e,attributes:Qr(t)})}function es(e){Yr().sendUIEvent(Wr(Wr({},e),{},{attributes:Qr(e.attributes)}))}function ts(e){Yr().sendScreenEvent(Wr(Wr({},e),{},{attributes:Qr(e.attributes)}))}function rs(e){Yr().sendTrackEvent(Wr(Wr({},e),{},{attributes:Qr(e.attributes)}))}},"./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/logger/index.js":(e,t,r)=>{"use strict";r.d(t,{Y:()=>a});var s=r("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),n=r("./node_modules/@babel/runtime/helpers/esm/createClass.js"),i=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/analytics-client/index.js"),o="[browser-storage-controls]",a=new(function(){function e(){(0,s.Z)(this,e)}return(0,n.Z)(e,[{key:"info",value:function(e,t){console.log("".concat(o,": ").concat(e),t?JSON.stringify(t):"")}},{key:"error",value:function(e,t){console.error("".concat(o,": ").concat(e),t?JSON.stringify(t):"")}},{key:"errorWithOperationalEvent",value:function(e){var t=e.action,r=e.attributes,s=void 0===r?{}:r,n=e.message,o=e.metadata;try{(0,i.zV)(t,s)}catch(e){this.error("Failed to send operational event on error: ".concat(t,". ").concat(e.message||""))}this.error(n,o?JSON.stringify(o):"")}},{key:"warn",value:function(e,t){console.warn("".concat(o,": ").concat(e),t?JSON.stringify(t):"")}}]),e}())},"./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/cookie-controls/get-cookie/index.js":(e,t,r)=>{"use strict";r.d(t,{e:()=>c});var s=r("./node_modules/@atlassian/browser-storage-controls/node_modules/js-cookie/src/js.cookie.js"),n=r.n(s),i=r("./node_modules/@atlaskit/platform-feature-flags/dist/esm/index.js"),o=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/analytics-client/index.js"),a=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/logger/index.js");function c(e){try{return(0,i.e)("platform.moonjelly.browser-storage-controls")&&(0,o.zV)("usedGetCookie",{cookieKey:e},1e4),e?n().get(e):n().get()}catch(t){a.Y.errorWithOperationalEvent({action:"usedGetCookieError",attributes:{cookieKey:e},message:"Failed to use get cookie. ".concat(t.message||"")})}}},"./node_modules/@atlassian/browser-storage-controls/node_modules/js-cookie/src/js.cookie.js":e=>{!function(t){if("function"==typeof define&&define.amd&&(define(t),!0),e.exports=t(),!!0){var r=window.Cookies,s=window.Cookies=t();s.noConflict=function(){return window.Cookies=r,s}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var s in r)t[s]=r[s]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function r(s){function n(){}function i(t,r,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},n.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var o=JSON.stringify(r);/^[\{\[]/.test(o)&&(r=o)}catch(e){}r=s.write?s.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var c in i)i[c]&&(a+="; "+c,!0!==i[c]&&(a+="="+i[c].split(";")[0]));return document.cookie=t+"="+r+a}}function o(e,r){if("undefined"!=typeof document){for(var n={},i=document.cookie?document.cookie.split("; "):[],o=0;o<i.length;o++){var a=i[o].split("="),c=a.slice(1).join("=");r||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var l=t(a[0]);if(c=(s.read||s)(c,l)||t(c),r)try{c=JSON.parse(c)}catch(e){}if(n[l]=c,e===l)break}catch(e){}}return e?n[e]:n}}return n.set=i,n.get=function(e){return o(e,!1)},n.getJSON=function(e){return o(e,!0)},n.remove=function(t,r){i(t,"",e(r,{expires:-1}))},n.defaults={},n.withConverter=r,n}((function(){}))}))},"./node_modules/@atlassian/browser-storage-controls/node_modules/uuid/lib/bytesToUuid.js":e=>{for(var t=[],r=0;r<256;++r)t[r]=(r+256).toString(16).substr(1);e.exports=function(e,r){var s=r||0,n=t;return[n[e[s++]],n[e[s++]],n[e[s++]],n[e[s++]],"-",n[e[s++]],n[e[s++]],"-",n[e[s++]],n[e[s++]],"-",n[e[s++]],n[e[s++]],"-",n[e[s++]],n[e[s++]],n[e[s++]],n[e[s++]],n[e[s++]],n[e[s++]]].join("")}},"./node_modules/@atlassian/browser-storage-controls/node_modules/uuid/lib/rng-browser.js":e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var s=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),s[t]=e>>>((3&t)<<3)&255;return s}}},"./node_modules/@atlassian/browser-storage-controls/node_modules/uuid/v4.js":(e,t,r)=>{var s=r("./node_modules/@atlassian/browser-storage-controls/node_modules/uuid/lib/rng-browser.js"),n=r("./node_modules/@atlassian/browser-storage-controls/node_modules/uuid/lib/bytesToUuid.js");e.exports=function(e,t,r){var i=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||s)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var a=0;a<16;++a)t[i+a]=o[a];return t||n(o)}},"./node_modules/@segment/isodate-traverse/lib/index.js":(e,t,r)=>{"use strict";var s=r("./node_modules/@segment/isodate/lib/index.js");function n(e,t){return void 0===t&&(t=!0),e&&"object"==typeof e?function(e,t){return Object.keys(e).forEach((function(r){e[r]=n(e[r],t)})),e}(e,t):Array.isArray(e)?function(e,t){return e.forEach((function(r,s){e[s]=n(r,t)})),e}(e,t):s.is(e,t)?s.parse(e):e}e.exports=n},"./node_modules/@segment/isodate/lib/index.js":(e,t)=>{"use strict";var r=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;t.parse=function(e){var t=[1,5,6,7,11,12],s=r.exec(e),n=0;if(!s)return new Date(e);for(var i,o=0;i=t[o];o++)s[i]=parseInt(s[i],10)||0;s[2]=parseInt(s[2],10)||1,s[3]=parseInt(s[3],10)||1,s[2]--,s[8]=s[8]?(s[8]+"00").substring(0,3):0," "===s[4]?n=(new Date).getTimezoneOffset():"Z"!==s[9]&&s[10]&&(n=60*s[11]+s[12],"+"===s[10]&&(n=0-n));var a=Date.UTC(s[1],s[2],s[3],s[5],s[6]+n,s[7],s[8]);return new Date(a)},t.is=function(e,t){return"string"==typeof e&&((!t||!1!==/^\d{4}-\d{2}-\d{2}/.test(e))&&r.test(e))}},"./packages/browser/index.ts":(e,t,r)=>{"use strict";r.d(t,{AR:()=>n,_X:()=>q,XC:()=>m,Fx:()=>c,rS:()=>d,k3:()=>Z,G3:()=>T,ap:()=>U,Dt:()=>_,TY:()=>$,i7:()=>g,nI:()=>k,zX:()=>f,BT:()=>N,v5:()=>F,FI:()=>M,vU:()=>h,Bp:()=>x,w1:()=>p,IN:()=>O,xb:()=>I,s:()=>E,IJ:()=>w,V5:()=>v,G6:()=>y,T:()=>S,ED:()=>b,E4:()=>u,Dl:()=>L,jk:()=>R});var s=r("./packages/config/index.ts");let n=function(e){return e.Edge="edg",e.EdgeLegacy="edge",e.Chrome="chrome",e.Explorer="explorer",e.Vivaldi="vivaldi",e.Yandex="yandex",e.Firefox="firefox",e.Safari="safari",e.Opera="opera",e.Samsung="samsung",e.UCBrowser="ucbrowser",e.Unknown="unknown-browser",e}({});var i=function(e){return e.Windows="windows",e.Mac="mac",e.Linux="linux",e.Android="android",e.iPad="ipad",e.iPod="ipod",e.iPhone="iphone",e.Unknown="unknown-os",e}(i||{});const o="unknown-browser-version",a=(e,t)=>{let{userAgent:r}=t;const s=r.indexOf(e);if(-1!==s){const t=r.substring(s+e.length+1);return t.includes(".")?parseFloat(t.split(".").slice(0,2).join(".")):parseInt(t,10)}return o},c=((e,t)=>{let{userAgent:r,vendor:s}=e;const i=!!t.documentMode,o=r.includes("Edg/"),a=r.includes("Edge"),c=r.includes("Opera")||r.includes("OPR"),l=r.includes("Vivaldi"),d=r.includes("Firefox"),u=r.includes("UCBrowser"),m=r.includes("SamsungBrowser"),p=s.includes("Yandex"),h=r.includes("Chrom")&&!o&&!a&&!c&&!p&&!l&&!m&&!u,f=r.includes("CriOS")||s.includes("Apple")&&!h;switch(!0){case h:return n.Chrome;case d:return n.Firefox;case f:return n.Safari;case o:return n.Edge;case a:return n.EdgeLegacy;case i:return n.Explorer;case c:return n.Opera;case p:return n.Yandex;case l:return n.Vivaldi;case u:return n.UCBrowser;case m:return n.Samsung;default:return n.Unknown}})(navigator,document),l=((e,t)=>{switch(e){case n.Chrome:{const e=a("Chrome",t);return e!==o?e:a("CriOS",t)}case n.Firefox:return a("Firefox",t);case n.Safari:return(e=>{if(e.userAgent.includes("CriOS")){const t=e.userAgent.match(/OS ([0-9]+)_[0-9]+(_[0-9]+)? like Mac OS X/);return t?+t[1]:o}return a("Version",e)})(t);case n.Edge:return a("Edg",t);case n.EdgeLegacy:return a("Edge",t);case n.Opera:return a("OPR",t);case n.Explorer:{const e=a("MSIE",t);return e!==o?e:a("rv",t)}case n.Yandex:return a("YaBrowser",t);case n.Vivaldi:return a("Vivaldi",t);case n.Samsung:return a("SamsungBrowser",t);case n.UCBrowser:return a("UCBrowser",t);default:return o}})(c,navigator),d=`${c}-${l}`,u=(e=>{let{userAgent:t,platform:r}=e;const s=r.includes("Win"),n=r.includes("Mac"),o=r.includes("Linux"),a=t.includes("Android"),c=t.includes("iPad"),l=t.includes("iPod"),d=t.includes("iPhone");switch(!0){case s:return i.Windows;case n:return i.Mac;case c:return i.iPad;case l:return i.iPod;case d:return i.iPhone;case a:return i.Android;case o:return i.Linux;default:return i.Unknown}})(navigator),m=`${c} ${d} ${u}`,p=()=>c===n.Explorer,h=()=>c===n.Firefox,f=()=>c===n.EdgeLegacy,g=()=>c===n.Chrome,y=()=>c===n.Safari,b=()=>u===i.Windows,v=()=>u===i.Mac,w=()=>u===i.Linux,_=()=>u===i.Android,C=()=>u===i.iPad,I=()=>u===i.iPod,O=()=>u===i.iPhone,E=()=>C()||O()||I(),S=()=>C()||O()||I()||_(),k=()=>s.Jf===s.tj.Desktop,T=()=>navigator.language||navigator.browserLanguage||"unknown";var A=r("./node_modules/memoize-one/dist/memoize-one.esm.js"),j=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/cookie-controls/get-cookie/index.js");const P=(0,A.Z)((e=>"true"===(0,j.e)("force_atlassian_embeddedDocument"))),D=(0,A.Z)((e=>"true"===(0,j.e)("force_embeddedDocument")||P(e)));function N(){return D(document.cookie)||window.top!==window.self}const x=()=>window.devicePixelRatio>1,L=()=>g()||h()||c===n.Edge,R=()=>g()||h()||y(),M=()=>{if(!N())return!1;const e=new URLSearchParams(window.location.search);return e.has("iframeSource")&&"msteams"===e.get("iframeSource")},F=()=>{if(P(document.cookie))return!0;if(!N())return!1;const e=new URLSearchParams(window.location.search);return e.has("iframeSource")&&"atlassian-smart-link"===e.get("iframeSource")},Z=()=>k()||M()||F();function U(){return"ResizeObserver"in window}const B={[n.Chrome]:108,[n.Firefox]:102,[n.Edge]:117,[n.Safari]:15.3,[n.Opera]:102,[n.Vivaldi]:3};function $(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;return t!==o&&(!!function(e){return Object.prototype.hasOwnProperty.call(B,e)}(e)&&t>=B[e])}class q{disconnect(){}observe(){}unobserve(){}}},"./packages/config/index.ts":(e,t,r)=>{"use strict";r.d(t,{tj:()=>s,O1:()=>Z,OX:()=>x,yM:()=>L,Iq:()=>N,Jf:()=>i,H1:()=>R,VY:()=>U,Hk:()=>C,jn:()=>I,ts:()=>oe,em:()=>_,d$:()=>j,Lp:()=>re,DV:()=>se,Sk:()=>g,Ub:()=>a,mV:()=>o,Yl:()=>A,LB:()=>G,NZ:()=>M,$P:()=>y,oM:()=>z,qL:()=>W,KW:()=>S,Hb:()=>k,Tg:()=>T,iO:()=>D,gJ:()=>u,r1:()=>m,MM:()=>F,gc:()=>h,EC:()=>ee,CJ:()=>B,Q6:()=>v,SP:()=>ne,qO:()=>O,mQ:()=>w,$g:()=>V,xc:()=>H,HO:()=>E,Sm:()=>J,Uq:()=>X,ZL:()=>Y,XH:()=>b,A_:()=>q,xI:()=>K,N8:()=>ie,MI:()=>p,M8:()=>P,zy:()=>f,xl:()=>Q,Gh:()=>$});let s=function(e){return e.Desktop="desktop",e}({});const n=window.init_config||{},i=n.appId||null,o=n.dontDismissNotifications||null,a=(n.limitMemoryUsage,n.desktopVersion||"0");function c(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l,d;const u="chlg06CfblVj204fihGEqA",m="env-8",p="https://trello-slack.services.atlassian.com",h=!1,f="https://p.trellocdn.com",g="56d5e249a98895a9797bebb9",y="5a999cd36066c584c097f193",b="5f4ff6881ce8e97c81d2f605",v="5c2462c384ab8949b1724a20",w="5ad892c30b141641d32919bf",_="588a331cc86ffbe08f5d2c67",C="https://trello-attachments.s3.amazonaws.com",I="https://trello-backgrounds.s3.amazonaws.com",O="https://trello-logos.s3.amazonaws.com",E="f7936f71-2186-4c33-8553-134e287aefdf",S="330642982326-o2b8p0glj3m1o0sgllrpas2m8j9hjn7i.apps.googleusercontent.com",k="AIzaSyAvSBSs9sIV0S5wf4ivvDrwYp6Q20e7jGE",T="122616814543-k4q6th338f4j05dkv1qgvcbutlpa0voe.apps.googleusercontent.com",A="36ipz29apw2svq8",j="zclwcvudmddhz0cscz3w6awtcfs8bne3",P="pk_live_51IaUVrBgOoA7vC4WlHhHNjTeOOqbF7d56Ge0Vvju0qbrBJGLdBmpeGQntGWaCgVKPk3c2itZOuTuFjcxmMyC6g4m00DL5aSU1K",D="AIzaSyBGuM0ku7LVKH0l45qQsvvUnG2H2jUX0GU",N="PROD",x="trello.com/gateway/api/gasv3/api/v1",L="https",R="1f24403e-f053-43de-b063-e20b357a8f63",M="prod",F="https://id.atlassian.com",Z="https://admin.atlassian.com",U="wss://trello.com/gateway/api/graphql/subscriptions",B="https://janus.prod.atl-paas.net",$="https://www.atlassian.com",q="https://1609e814bfa14a3db09f984e6426cfd3@o55978.ingest.sentry.io/5988847",V="6052d130068a8c0de7b022b4",H="https://appsource.microsoft.com/en-us/product/office/WA200002592?tab=Overview",z="6052d16c340ed23e9da083ed",W="https://workspace.google.com/marketplace/app/trello_for_gmail/710372432947",G="6052d0bb1b3c162630f54230",K=!0,Q="https://trello-server.us-east-1.prod.atl-paas.net",Y="https://atl-onetrust-wrapper.atlassian.com/assets/atl-onetrust-wrapper.min.js",J="dcb287ca-43c0-462c-a090-46b2debf69e2",X=!1,ee=!1,te=null!==(l=null===(d=window)||void 0===d?void 0:d.trelloVersion)&&void 0!==l?l:"dev-0",re=new class{constructor(e){c(this,"head",void 0),c(this,"patch",0),c(this,"version",void 0);const t=e.split("-");this.head=t.slice(0,-1).join("-"),this.version=parseFloat(t.slice(-1)[0])}toString(){return`${this.head}-${this.fullVersion()}`}toJSON(){return this.toString()}fullVersion(){return[this.version,this.patch].filter((e=>e)).join(".")||0}}(te),se=re.toString(),ne=window.locale||"en",ie=location.origin||/^[^/]+?[/]{2}[^/]+/.exec(location.href)[0],oe=window.__bifrost_track__},"./packages/feature-flag-client/src/getRecordedFeatureFlag.ts":(e,t,r)=>{"use strict";r.d(t,{T:()=>n});var s=r("./packages/storage/index.ts");function n(e,t){var r;const n=s.lp.get("featureFlagSnapshot"),{remote:i={},overrides:o={}}=null!=n?n:{},a=o[e],c=i[e];return null!==(r=null!=a?a:c)&&void 0!==r?r:t}},"./packages/invitation-tokens/src/getInvitationTokens.ts":(e,t,r)=>{"use strict";r.d(t,{Y:()=>s});const s=()=>{let e;const t=[],r=/invite-token-[-a-f0-9]*=([^;]+)/g;for(;e=null===(s=r.exec(document.cookie))||void 0===s?void 0:s[1];){var s;t.push(unescape(e))}if(t.length>0)return t.join(",")}},"./packages/quickload/src/cleanPreload.ts":(e,t,r)=>{"use strict";r.d(t,{Y:()=>s});const s=e=>({isLoading:e.isLoading,start:e.start,used:e.used,url:e.url})},"./packages/quickload/src/formatUrl.ts":(e,t,r)=>{"use strict";r.d(t,{C:()=>n});var s=r("./packages/invitation-tokens/src/getInvitationTokens.ts");const n=(e,t)=>{var r,n;let{rootId:i,idModel:o}=t,a=e.replace(i,o);const c=null===(r=window)||void 0===r||null===(n=r.document)||void 0===n?void 0:n.cookie;if(new RegExp("^/1/search").test(e)){var l;const e=null===(l=/dsc=([^;]+)/.exec(c))||void 0===l?void 0:l[1];a+=`&dsc=${null!=e?e:"undefined"}`}const d=(0,s.Y)();return a+=d?`&invitationTokens=${d}`:"",a}},"./packages/quickload/src/getPreloadsFromPath.ts":(e,t,r)=>{"use strict";r.d(t,{k:()=>d});var s=r("./packages/feature-flag-client/src/getRecordedFeatureFlag.ts"),n=r("./packages/quickload/src/formatUrl.ts");const i={header:{taskName:null,requests:[{url:"/1/member/:idMember?fields=id%2CaaBlockSyncUntil%2CaaEmail%2CaaId%2CactivityBlocked%2CavatarHash%2CavatarUrl%2Cbio%2CbioData%2Cconfirmed%2CcredentialsRemovedCount%2CdomainClaimed%2Cemail%2CfullName%2CidBoards%2CidEnterprise%2CidEnterprisesAdmin%2CidEnterprisesDeactivated%2CidEnterprisesImplicitAdmin%2CidMemberReferrer%2CidOrganizations%2CidPremOrgsAdmin%2Cinitials%2CisAaMastered%2CixUpdate%2Climits%2CloginTypes%2CmarketingOptIn%2CmemberType%2CmessagesDismissed%2CnonPublic%2CnonPublicAvailable%2ConeTimeMessagesDismissed%2Cprefs%2CpremiumFeatures%2Cproducts%2CrequiresAaOnboarding%2CsessionType%2Cstatus%2Ctrophies%2Curl%2Cusername&campaigns=true&channels=true&enterpriseLicenses=true&enterprises=true&enterprise_filter=saml%2Cmember%2Cmember-unconfirmed%2Cowned&enterprise_fields=id%2CdisplayName%2CidAdmins%2Cname%2Coffering%2CorganizationPrefs%2Cprefs%2Csandbox%2CsandboxExpiry&enterpriseWithRequiredConversion=true&logins=true&organizations=all&organization_fields=id%2CdisplayName%2CidEnterprise%2CjwmLink%2ClogoHash%2Cname%2Coffering%2CpremiumFeatures%2Cproducts&organization_enterprise=true&organization_paidAccount=true&organization_paidAccount_fields=billingDates%2CcanRenew%2CcardLast4%2CcardType%2CcontactEmail%2CcontactFullName%2CcontactLocale%2Ccountry%2CdateFirstSubscription%2CdatePendingDisabled%2CexpirationDates%2CinvoiceDetails%2CixSubscriber%2CneedsCreditCardUpdate%2CpaidProduct%2CpreviousSubscription%2CproductOverride%2Cproducts%2CscheduledChange%2Cstanding%2CstateTaxId%2CtaxId%2CtrialExpiration%2CtrialType%2Czip&paidAccount=true&paidAccount_fields=billingDates%2CcanRenew%2CcardLast4%2CcardType%2CcontactEmail%2CcontactFullName%2CcontactLocale%2Ccountry%2CdateFirstSubscription%2CdatePendingDisabled%2CexpirationDates%2CinvoiceDetails%2CixSubscriber%2CneedsCreditCardUpdate%2CpaidProduct%2CpreviousSubscription%2CproductOverride%2Cproducts%2CscheduledChange%2Cstanding%2CstateTaxId%2CtaxId%2CtrialExpiration%2CtrialType%2Czip&pluginData=true&savedSearches=true&teamify=true",rootId:":idMember",operationName:"quickload:MemberHeader",modelName:"Member"},{url:"/1/member/:idMember?fields=id&boards=open%2Cstarred&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2Cname%2CnodeId%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Csubscribed%2Curl&board_memberships=me&board_organization=true&board_organization_fields=id%2Ccredits%2CdisplayName%2CidEnterprise%2Climits%2ClogoHash%2Cname%2Coffering%2Cprefs%2CpremiumFeatures%2Cproducts&boardStars=true&credits=invitation%2CpromoCode&organizations=all&organization_fields=id%2Ccredits%2Climits%2Cmemberships%2Cprefs%2CpremiumFeatures",rootId:":idMember",operationName:"quickload:MemberBoards",modelName:"Member"}]},"^/b/([^/]+)":{taskName:"view-board",requests:[{url:"/1/board/:idBoard?fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2Cdesc%2CdescData%2CenterpriseOwned%2CidEnterprise%2CidMemberCreator%2CidOrganization%2CidTags%2ClabelNames%2Climits%2Cmemberships%2Cname%2CnodeId%2CpowerUps%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Csubscribed%2CtemplateGallery%2Curl&organization_disable_mock=true&boardPlugins=true&cards=visible&card_fields=id%2Caddress%2Cbadges%2CcardRole%2Cclosed%2Ccoordinates%2Ccover%2CdateLastActivity%2Cdesc%2CdescData%2Cdue%2CdueComplete%2CdueReminder%2CidAttachmentCover%2CidBoard%2CidLabels%2CidList%2CidMembers%2CidShort%2CisTemplate%2Clabels%2Climits%2ClocationName%2Cname%2Cpos%2CshortLink%2CshortUrl%2Cstart%2Csubscribed%2Curl&card_attachments=true&card_attachment_fields=id%2Cbytes%2Cdate%2CedgeColor%2CfileName%2CidMember%2CisUpload%2CmimeType%2Cname%2Cpos%2Curl&card_checklists=all&card_checklist_fields=id%2CidBoard%2CidCard%2Cname%2Cpos&card_checklist_checkItems=none&card_customFieldItems=true&card_pluginData=true&card_stickers=true&customFields=true&enterprise=true&enterprise_fields=id%2CdisplayName&labels=all&label_fields=id%2Ccolor%2CidBoard%2Cname&labels_limit=1000&lists=open&list_fields=id%2Cclosed%2Ccolor%2CcreationMethod%2CidBoard%2Climits%2Cname%2Cpos%2CsoftLimit%2Csubscribed&members=all&member_fields=id%2CactivityBlocked%2CavatarUrl%2Cbio%2CbioData%2Cconfirmed%2CfullName%2CidEnterprise%2CidMemberReferrer%2CidPremOrgsAdmin%2Cinitials%2CmemberType%2CnonPublic%2Curl%2Cusername&memberships_orgMemberType=true&myPrefs=true&organization=true&organization_fields=id%2Cdesc%2CdisplayName%2CidEnterprise%2Climits%2ClogoHash%2Cmemberships%2Cname%2Coffering%2Cprefs%2CpremiumFeatures%2Cproducts%2Curl%2Cwebsite&organization_enterprise=true&organization_memberships=all&organization_pluginData=true&organization_tags=true&pluginData=true",rootId:":idBoard",operationName:"quickload:CurrentBoardFull",modelName:"Board",featureFlag:{key:"gp.split-current-board-full",value:"false",defaultValue:"false"}},{url:"/gateway/api/graphql",rootId:":idBoard",operationName:"quickload:TrelloCurrentBoardFull",modelName:"Board",featureFlag:{key:"fep.native-current-board-full",value:"true",defaultValue:"false"},graphQLPayload:{query:'query TrelloCurrentBoardFull($id:TrelloShortLink!){trello{boardByShortLink(shortLink:$id)@optIn(to:"TrelloBoard"){id __typename closed creationMethod creator{id __typename objectId}customFields{__typename nodes{__typename display{__typename cardFront}name objectId options{__typename color objectId position value{__typename text}}position type}}description{__typename customData{emojis(first:-1){nodes{name url}}}text}enterprise{id __typename displayName objectId}enterpriseOwned galleryInfo{id __typename avatarShape avatarUrl blurb byline category{__typename key}language{__typename description enabled language locale localizedDescription}stats{__typename copyCount viewCount}}labels(first:-1){__typename nodes{__typename color name objectId}}lastActivityAt limits{__typename attachments{__typename perBoard{__typename disableAt status warnAt}perCard{__typename disableAt status warnAt}}boards{__typename totalMembersPerBoard{__typename disableAt status warnAt}}cards{__typename openPerBoard{__typename disableAt status warnAt}openPerList{__typename disableAt status warnAt}totalPerBoard{__typename disableAt status warnAt}totalPerList{__typename disableAt status warnAt}}checkItems{__typename perChecklist{__typename disableAt status warnAt}}checklists{__typename perBoard{__typename disableAt status warnAt}perCard{__typename disableAt status warnAt}}customFieldOptions{__typename perField{__typename disableAt status warnAt}}customFields{__typename perBoard{__typename disableAt status warnAt}}labels{__typename perBoard{__typename disableAt status warnAt}}lists{__typename openPerBoard{__typename disableAt status warnAt}totalPerBoard{__typename disableAt status warnAt}}reactions{__typename perAction{__typename disableAt status warnAt}}stickers{__typename perCard{__typename disableAt status warnAt}}}lists(filter:{closed:false},first:-1)@optIn(to:"TrelloListCards"){__typename nodes{id __typename board@optIn(to:"TrelloListBoard"){id __typename objectId}cards(filter:{closed:false},first:-1)@optIn(to:"TrelloListCards"){__typename nodes{id __typename attachments(first:-1){__typename nodes{__typename bytes date edgeColor fileName isUpload mimeType name objectId position url}}badges{__typename attachments attachmentsByType{__typename trello{__typename board card}}checkItems checkItemsChecked checkItemsEarliestDue comments description due{__typename at complete}location startedAt viewer{__typename subscribed voted}votes}checklists(first:-1){__typename nodes{__typename board{id __typename objectId}card{id __typename objectId}name objectId position}}closed cover{__typename attachment{__typename objectId}brightness color edgeColor powerUp{__typename objectId}previews(first:-1){__typename nodes{__typename bytes height scaled url width}}sharedSourceUrl size uploadedBackground{__typename objectId}}customFieldItems(first:-1){__typename nodes{__typename customField{__typename objectId}model{id __typename objectId}objectId value{id __typename checked date number text}}}description{__typename customData{__typename emojis(first:-1){__typename nodes{__typename name url}}}text}due{__typename at complete reminder}isTemplate labels(first:-1){__typename nodes{__typename color name objectId}}lastActivityAt limits{__typename attachments{perCard{count disableAt status warnAt}}checklists{perCard{count disableAt status warnAt}}stickers{perCard{count disableAt status warnAt}}}list{id __typename board@optIn(to:"TrelloListBoard"){id __typename objectId}objectId}location{__typename address coordinates{__typename latitude longitude}name}members(first:-1){__typename nodes{id __typename objectId}}name objectId position powerUpData(first:-1){__typename nodes{__typename access objectId powerUp{__typename objectId}scope value}}role shortId shortLink shortUrl startedAt stickers(first:-1){__typename nodes{__typename image left objectId rotate top url zIndex}}url}}closed color limits{__typename cards{__typename openPerList{__typename count disableAt status warnAt}totalPerList{__typename count disableAt status warnAt}}}name objectId position softLimit viewer{__typename subscribed}}}members(first:-1){__typename edges{__typename membership{__typename deactivated objectId type unconfirmed workspaceMemberType}node{id __typename activityBlocked avatarUrl bio confirmed enterprise{id __typename objectId}fullName initials nonPublicData{__typename avatarUrl fullName initials}objectId url username workspaces(filter:{tier:PAID,membershipType:ADMIN},first:-1){__typename nodes{id __typename objectId}}}}}name objectId popularLabelNamesByColor{__typename color labelName}powerUpData(first:-1){__typename nodes{__typename access objectId powerUp{objectId}scope value}}powerUps(filter:{access:"enabled"},first:-1){edges{__typename node{__typename objectId}objectId}}prefs{__typename background{__typename bottomColor brightness color image imageScaled{height url width}tile topColor}calendarFeedEnabled canInvite cardAging cardCovers comments hiddenPowerUpBoardButtons{__typename objectId}hideVotes invitations isTemplate permissionLevel selfJoin switcherViews{__typename enabled viewType}voting}premiumFeatures shortLink shortUrl tags(first:-1){__typename nodes{__typename objectId}}url viewer{__typename calendarKey email{__typename key list{id __typename objectId}position}lastSeenAt sidebar{__typename show}subscribed}workspace{id __typename description displayName enterprise{id __typename displayName objectId}logoHash members(first:-1){__typename edges{__typename membership{__typename objectId type unconfirmed}}nodes{id __typename objectId}}name objectId prefs{__typename associatedDomain}tags(first:-1){__typename nodes{__typename name objectId}}url website}}}}',variables:{id:":idBoard"},operationName:"TrelloCurrentBoardFull"}}]},"^//([^/]*([^/]+))$":{taskName:null,requests:[{url:"/1/member/:idMember?fields=id&boards=open%2Cstarred&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2Cname%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Curl&boardStars=true",rootId:":idMember",operationName:"quickload:MemberQuickBoards",modelName:"Member"},{url:"/1/search?query=:searchTerm&partial=true&modelTypes=boards&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2Cname%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Curl",rootId:":searchTerm",operationName:"quickload:QuickBoardsSearch",modelName:"Search"}]},"^/search":{taskName:null,requests:[{url:"/1/member/:idMember?fields=id&boards=open%2Cstarred&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2Cname%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Curl&boardStars=true",rootId:":idMember",operationName:"quickload:MemberQuickBoards",modelName:"Member"}]},"^//$":{taskName:null,requests:[{url:"/1/member/:idMember?fields=id&boards=open%2Cstarred&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2Cname%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Curl&boardStars=true",rootId:":idMember",operationName:"quickload:MemberQuickBoards",modelName:"Member"}]},"^/c/([^/]+)":{taskName:"view-board",requests:[{url:"/1/card/:idCard?fields=id%2Cbadges%2CcardRole%2Cclosed%2Ccover%2CdateLastActivity%2Cdesc%2CdescData%2Cdue%2CdueComplete%2CdueReminder%2Cemail%2CidAttachmentCover%2CidBoard%2CidChecklists%2CidLabels%2CidList%2CidMembers%2CidMembersVoted%2CidShort%2CisTemplate%2Clabels%2Climits%2CmanualCoverAttachment%2Cname%2Cpos%2CshortLink%2CshortUrl%2Cstart%2Csubscribed%2Curl&attachments=true&attachment_fields=id%2Cbytes%2Cdate%2CedgeColor%2CfileName%2CidMember%2CisUpload%2CmimeType%2Cname%2Cpos%2Cpreviews%2Curl&customFieldItems=true&pluginData=true&stickers=true&sticker_fields=id%2Cimage%2CimageScaled%2CimageUrl%2Cleft%2Crotate%2Ctop%2CzIndex",rootId:":idCard",operationName:"quickload:PreloadCard",modelName:"Card"}],deferredPreloads:["CurrentBoardFull"]},"^/w/([^/]+)/billing$":{taskName:null,requests:[{url:"/1/organization/:idOrganization?fields=id%2Ccredits%2CdisplayName%2CidEnterprise%2Cmemberships%2Cname%2Coffering%2Cprefs%2Cproducts&enterprise=true&memberships=active",rootId:":idOrganization",operationName:"quickload:OrganizationBillingPage",modelName:"Organization"}]},"^/([^/]+)/billing$":{taskName:null,requests:[{url:"/1/organization/:idOrganization?fields=id%2Ccredits%2CdisplayName%2CidEnterprise%2Cmemberships%2Cname%2Coffering%2Cprefs%2Cproducts&enterprise=true&memberships=active",rootId:":idOrganization",operationName:"quickload:OrganizationBillingPage",modelName:"Organization"}]},"^/w/(?!search)(?!create-first-team)(?!blank)(?!shortcuts)(?!templates)(?!redeem)([^/]+)$":{taskName:null,requests:[{url:"/1/organization/:idOrganization?fields=id%2CbillableCollaboratorCount%2Ccredits%2Cdesc%2CdescData%2CdisplayName%2CidEnterprise%2Climits%2ClogoHash%2Cmemberships%2Cname%2Coffering%2Cprefs%2CpremiumFeatures%2Cproducts%2Cwebsite&boards=open&boards_count=29&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2CidTags%2Cname%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Curl&boards_sortBy=dateLastActivity&boards_sortOrder=desc&enterprise=true&memberships=active&paidAccount=true&paidAccount_fields=billingDates%2CcanRenew%2CcardLast4%2CcardType%2CcontactEmail%2CcontactFullName%2CcontactLocale%2Ccountry%2CdateFirstSubscription%2CexpirationDates%2CinvoiceDetails%2CixSubscriber%2CneedsCreditCardUpdate%2CpaidProduct%2CpreviousSubscription%2CproductOverride%2Cproducts%2CscheduledChange%2Cstanding%2CstateTaxId%2CtaxId%2CtrialExpiration%2CtrialType%2Czip&tags=true",rootId:":idOrganization",operationName:"quickload:WorkspaceBoardsPageMinimal",modelName:"Organization"}]},"^/(?!search)(?!create-first-team)(?!blank)(?!shortcuts)(?!templates)(?!redeem)([^/]+)$":{taskName:null,requests:[{url:"/1/organization/:idOrganization?fields=id%2CbillableCollaboratorCount%2Ccredits%2Cdesc%2CdescData%2CdisplayName%2CidEnterprise%2Climits%2ClogoHash%2Cmemberships%2Cname%2Coffering%2Cprefs%2CpremiumFeatures%2Cproducts%2Cwebsite&boards=open&boards_count=29&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2CidTags%2Cname%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Curl&boards_sortBy=dateLastActivity&boards_sortOrder=desc&enterprise=true&memberships=active&paidAccount=true&paidAccount_fields=billingDates%2CcanRenew%2CcardLast4%2CcardType%2CcontactEmail%2CcontactFullName%2CcontactLocale%2Ccountry%2CdateFirstSubscription%2CexpirationDates%2CinvoiceDetails%2CixSubscriber%2CneedsCreditCardUpdate%2CpaidProduct%2CpreviousSubscription%2CproductOverride%2Cproducts%2CscheduledChange%2Cstanding%2CstateTaxId%2CtaxId%2CtrialExpiration%2CtrialType%2Czip&tags=true",rootId:":idOrganization",operationName:"quickload:WorkspaceBoardsPageMinimal",modelName:"Organization"}]},"^/w/([^/]+)/home$":{taskName:null,requests:[{url:"/1/organization/:idOrganization?fields=id%2CbillableCollaboratorCount%2Ccredits%2Cdesc%2CdescData%2CdisplayName%2CidEnterprise%2Climits%2ClogoHash%2Cmemberships%2Cname%2Coffering%2Cprefs%2CpremiumFeatures%2Cproducts%2Cwebsite&boards=open&boards_count=100&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2CidTags%2Cname%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Curl&boards_sortBy=dateLastActivity&boards_sortOrder=desc&board_membershipCounts=active&board_starCounts=organization&enterprise=true&members=all&member_fields=id&memberships=active&paidAccount=true&paidAccount_fields=billingDates%2CcanRenew%2CcardLast4%2CcardType%2CcontactEmail%2CcontactFullName%2CcontactLocale%2Ccountry%2CdateFirstSubscription%2CexpirationDates%2CinvoiceDetails%2CixSubscriber%2CneedsCreditCardUpdate%2CpaidProduct%2CpreviousSubscription%2CproductOverride%2Cproducts%2CscheduledChange%2Cstanding%2CstateTaxId%2CtaxId%2CtrialExpiration%2CtrialType%2Czip&tags=true",rootId:":idOrganization",operationName:"quickload:WorkspaceHomePageMinimal",modelName:"Organization"}]},"^/([^/]+)/home$":{taskName:null,requests:[{url:"/1/organization/:idOrganization?fields=id%2CbillableCollaboratorCount%2Ccredits%2Cdesc%2CdescData%2CdisplayName%2CidEnterprise%2Climits%2ClogoHash%2Cmemberships%2Cname%2Coffering%2Cprefs%2CpremiumFeatures%2Cproducts%2Cwebsite&boards=open&boards_count=100&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2CidTags%2Cname%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Curl&boards_sortBy=dateLastActivity&boards_sortOrder=desc&board_membershipCounts=active&board_starCounts=organization&enterprise=true&members=all&member_fields=id&memberships=active&paidAccount=true&paidAccount_fields=billingDates%2CcanRenew%2CcardLast4%2CcardType%2CcontactEmail%2CcontactFullName%2CcontactLocale%2Ccountry%2CdateFirstSubscription%2CexpirationDates%2CinvoiceDetails%2CixSubscriber%2CneedsCreditCardUpdate%2CpaidProduct%2CpreviousSubscription%2CproductOverride%2Cproducts%2CscheduledChange%2Cstanding%2CstateTaxId%2CtaxId%2CtrialExpiration%2CtrialType%2Czip&tags=true",rootId:":idOrganization",operationName:"quickload:WorkspaceHomePageMinimal",modelName:"Organization"}]}};function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const l=e=>!e.featureFlag||(0,s.T)(e.featureFlag.key,e.featureFlag.defaultValue)===e.featureFlag.value,d=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.pathname,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.search;arguments.length>2&&void 0!==arguments[2]||window.document.cookie;const s=t.replace(/\?(.*)$/,""),o=Object.keys(i).find((e=>{if("header"===e)return!1;const t=i[e].requests,r=new RegExp(e);return!!t.find(l)&&r.test(s)})),c=o&&i[o].requests.filter(l),d=o&&i[o].deferredPreloads?i[o].deferredPreloads:[],u=o&&i[o].taskName||null;let m=(null===(e=new RegExp(o||"").exec(s))||void 0===e?void 0:e[1])||"";new RegExp("^/search$").test(t)&&(m=new URLSearchParams(r).get("q")||"");const p=i.header.requests.filter(l).concat(c||[]).map((e=>{let{url:t,rootId:r,operationName:s,modelName:i,graphQLPayload:o}=e;const c={url:(0,n.C)(t,{rootId:r,idModel:":idMember"===r?"me":m}),operationName:s,modelName:i,queryName:s.replace("quickload:",""),taskName:u};return o&&(c.graphQLPayload=a(a({},o),{},{variables:{id:":idMember"===r?"me":m}})),c}));return{path:s,preloads:p,deferredPreloads:d,param:m}}},"./packages/quickload/src/preloadsHash.ts":(e,t,r)=>{"use strict";r.d(t,{M:()=>s});const s={}},"./packages/quickload/src/quickload.ts":(e,t,r)=>{"use strict";r.d(t,{X:()=>f});var s=r("./packages/feature-flag-client/src/getRecordedFeatureFlag.ts"),n=r("./packages/quickload/src/cleanPreload.ts"),i=r("./packages/quickload/src/getPreloadsFromPath.ts");const o=()=>{let e="";for(let t=0;t<16;t+=1){e+="0123456789abcdef"[Math.floor(16*Math.random())]}return e};function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function c(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=r("./packages/quickload/src/preloadsHash.ts");const d=function(e){try{return JSON.parse(e)}catch(e){return null}},u=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unknown",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"model-loader",i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;const c=new XMLHttpRequest,l=!0===(0,s.T)("fep.operation-name-in-url",!1);c.open("GET",l&&r?`${e}&operationName=${r}`:e,!0),c.setRequestHeader("Accept","application/json,text/plain"),c.setRequestHeader("X-Trello-Client-Version",window.trelloVersion||"dev-0"),c.setRequestHeader("X-Trello-Operation-Source",n),c.setRequestHeader("X-Trello-Operation-Name",r),i&&(c.setRequestHeader("X-Trello-TraceId",i),c.setRequestHeader("X-B3-TraceId",i),c.setRequestHeader("X-B3-SpanId",o()),c.setRequestHeader("X-Trello-Task",a||"not-implemented")),c.onreadystatechange=function(){4===c.readyState&&(200!==c.status?t([c.status,c.responseText]):t(null,[d(c.responseText),c]))},c.send(null)},m=function(e){e in l.M&&delete l.M[e]},p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"preload",r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(!e)return;const a={isLoading:!0,callbacks:[],start:Date.now(),used:!1,url:e,traceId:n};l.M[e]=a,r?function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unknown",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"quickload",a=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0;const l=new Headers;l.append("Content-Type","application/json; charset=utf-8"),l.append("Accept","application/json"),l.append("X-Trello-Client-Version",window.trelloVersion||"dev-0"),l.append("X-Trello-Operation-Source",i),l.append("X-Trello-Operation-Name",n),a&&(l.append("X-Trello-TraceId",a),l.append("X-B3-TraceId",a),l.append("X-B3-SpanId",o()),l.append("X-Trello-Task",c||"not-implemented")),(async()=>{try{const r=!0===(0,s.T)("fep.operation-name-in-url",!1),i=await fetch(r&&n?`${e}?operationName=${n}`:e,{method:"POST",headers:l,body:JSON.stringify(t)});i.ok&&await i.json()}catch(e){}})()}(e,r,(function(e,t){a.isLoading=!1}),t,"quickload",n,i):u(e,(function(e,t){let r;if(a.isLoading=!1,e)for(r of(a.error=e,Array.from(a.callbacks)))r(e);else for(r of(a.data=t,Array.from(a.callbacks)))r(null,t)}),t,"quickload",n,i)},h={init(){const e=Math.floor(Date.now()/1e3).toString(16)+(o().slice(8)+o()),{preloads:t}=(0,i.k)();for(const{url:r,operationName:s,graphQLPayload:n,taskName:i}of t)p(r,s,n,e,i)},getPreloadsFromPath:i.k,makeUrl:function(e,t){let r,s;s=void 0===t?{}:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t);const n=[],i=/invite-token-[-a-f0-9]*=([^;]+)/g;for(;void 0!==(r=null===(o=i.exec(document.cookie))||void 0===o?void 0:o[1]);){var o;n.push(unescape(r))}if(n.length>0&&(s.invitationTokens=n.join(",")),new RegExp("^/1/search(/|$)").test(e)){var l;const e=null===(l=/dsc=([^;]+)/.exec(document.cookie))||void 0===l?void 0:l[1];e&&(s.dsc=e)}const d=[];for(const e in s){const t=s[e];d.push([e,encodeURIComponent(t)].join("="))}return[e,d.join("&")].join("?")},load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},r=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;const a=l.M[e];if(void 0!==a)return a.used=!0,a.isLoading?a.callbacks.push(t):t(a.error,a.data),(0,n.Y)(a);u(e,t,r,s,i,o)},getPreloadTraceId(){const{preloads:e}=(0,i.k)();for(const{url:t}of e)if(t in l.M)return l.M[t].traceId},clear(){for(const e in l.M)m(e)},markComplete(){this.status="complete"},status:"pending"};h.init();const f=window.QuickLoad=h},"./packages/storage/index.ts":(e,t,r)=>{"use strict";r.d(t,{$g:()=>u,lp:()=>d,V_:()=>p});var s=r("./packages/browser/index.ts");function n(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class i{constructor(){n(this,"storage",void 0),this.storage={}}get length(){return Object.keys(this.storage).length}clear(){this.storage={}}getItem(e){return this.storage[e]||null}key(e){return Object.keys(this.storage)[e]||null}removeItem(e){delete this.storage[e]}setItem(e,t){this.storage[e]=t||""}}function o(e){let t;try{t=window[e];const r="__storage_test__";return t.setItem(r,r),t.removeItem(r),!0}catch(e){return!(!function(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)}(e)||!t||0===t.length)}}let a=function(e){return e.LOCAL_STORAGE_KEY="localStorage",e.SESSION_STORAGE_KEY="sessionStorage",e}({});function c(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class l{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.LOCAL_STORAGE_KEY;c(this,"storage",void 0),c(this,"listeners",void 0),c(this,"errorListeners",void 0),c(this,"listenersSyncedAcrossBrowser",void 0),c(this,"LISTENER_IGNORABLE_KEY_PREFIXES",/^(awc\.)/),c(this,"onStorage",(e=>{const{key:t,oldValue:r,newValue:s}=e;t&&!t.match(this.LISTENER_IGNORABLE_KEY_PREFIXES)&&this.broadcastChangeFromOtherInstance({key:t,oldValue:r,newValue:s})})),c(this,"getAllKeys",(()=>this.storage?Object.keys(this.storage):[])),this.listeners=new Set,this.errorListeners=new Set,this.listenersSyncedAcrossBrowser=new Set,(0,s.BT)()&&!o(e)?this.storage=new i:this.storage=window[e],window.addEventListener("storage",this.onStorage)}listen(e){this.listeners.add(e)}addErrorListener(e){this.errorListeners.add(e)}removeErrorListener(e){this.errorListeners.delete(e)}listenSyncedAcrossBrowser(e){this.listenersSyncedAcrossBrowser.add(e),this.listen(e)}unlisten(e){this.listeners.delete(e),this.listenersSyncedAcrossBrowser.delete(e)}broadcastLocalChange(e){this.listeners.forEach((t=>{t(e)}))}broadcastError(e){this.errorListeners.forEach((t=>{t(e)}))}broadcastChangeFromOtherInstance(e){this.listenersSyncedAcrossBrowser.forEach((t=>{t(e)}))}isEnabled(){return!!this.storage}set(e,t){try{if(this.storage){const r=this.getRaw(e),s=JSON.stringify(t);this.storage.setItem(e,s),this.broadcastLocalChange({key:e,oldValue:r,newValue:s})}}catch(t){console.warn(t),this.broadcastError({key:e,error:t})}}get(e){let t=null;const r=this.getRaw(e);if(r)try{t=JSON.parse(r)}catch(e){console.warn(e)}return t}getRaw(e){return this.storage?this.storage.getItem(e):null}unset(e){this.storage&&null!==this.getRaw(e)&&this.storage.removeItem(e)}}const d=new l(a.LOCAL_STORAGE_KEY),u=new l(a.SESSION_STORAGE_KEY);var m=r("./node_modules/react/index.js");const p=(e,t)=>{const[r,s]=(0,m.useState)(t),n=(0,m.useCallback)((t=>{s(t),null===t?d.unset(e):d.set(e,t)}),[e]);return(0,m.useEffect)((()=>{const t=d.get(e);s(null!=t?t:r)}),[]),[r,n]}},"./node_modules/date-fns/esm/_lib/getTimezoneOffsetInMilliseconds/index.js":(e,t,r)=>{"use strict";function s(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}r.d(t,{Z:()=>s})},"./node_modules/date-fns/esm/_lib/requiredArgs/index.js":(e,t,r)=>{"use strict";function s(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}r.d(t,{Z:()=>s})},"./node_modules/date-fns/esm/differenceInCalendarDays/index.js":(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r("./node_modules/date-fns/esm/_lib/getTimezoneOffsetInMilliseconds/index.js"),n=r("./node_modules/date-fns/esm/startOfDay/index.js"),i=r("./node_modules/date-fns/esm/_lib/requiredArgs/index.js"),o=864e5;function a(e,t){(0,i.Z)(2,arguments);var r=(0,n.Z)(e),a=(0,n.Z)(t),c=r.getTime()-(0,s.Z)(r),l=a.getTime()-(0,s.Z)(a);return Math.round((c-l)/o)}},"./node_modules/date-fns/esm/differenceInDays/index.js":(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r("./node_modules/date-fns/esm/toDate/index.js"),n=r("./node_modules/date-fns/esm/differenceInCalendarDays/index.js"),i=r("./node_modules/date-fns/esm/_lib/requiredArgs/index.js");function o(e,t){var r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function a(e,t){(0,i.Z)(2,arguments);var r=(0,s.Z)(e),a=(0,s.Z)(t),c=o(r,a),l=Math.abs((0,n.Z)(r,a));r.setDate(r.getDate()-c*l);var d=c*(l-Number(o(r,a)===-c));return 0===d?0:d}},"./node_modules/date-fns/esm/startOfDay/index.js":(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=r("./node_modules/date-fns/esm/toDate/index.js"),n=r("./node_modules/date-fns/esm/_lib/requiredArgs/index.js");function i(e){(0,n.Z)(1,arguments);var t=(0,s.Z)(e);return t.setHours(0,0,0,0),t}},"./node_modules/date-fns/esm/toDate/index.js":(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=r("./node_modules/@babel/runtime/helpers/esm/typeof.js"),n=r("./node_modules/date-fns/esm/_lib/requiredArgs/index.js");function i(e){(0,n.Z)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===(0,s.Z)(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}},"./node_modules/decode-uri-component/index.js":e=>{"use strict";var t="%[a-f0-9]{2}",r=new RegExp("("+t+")|([^%]+?)","gi"),s=new RegExp("("+t+")+","gi");function n(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var r=e.slice(0,t),s=e.slice(t);return Array.prototype.concat.call([],n(r),n(s))}function i(e){try{return decodeURIComponent(e)}catch(i){for(var t=e.match(r)||[],s=1;s<t.length;s++)t=(e=n(t,s).join("")).match(r)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"","%FF%FE":""},r=s.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(e){var n=i(r[0]);n!==r[0]&&(t[r[0]]=n)}r=s.exec(e)}t["%C2"]="";for(var o=Object.keys(t),a=0;a<o.length;a++){var c=o[a];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},"./node_modules/filter-obj/index.js":e=>{"use strict";e.exports=function(e,t){for(var r={},s=Object.keys(e),n=Array.isArray(t),i=0;i<s.length;i++){var o=s[i],a=e[o];(n?-1!==t.indexOf(o):t(o,a,e))&&(r[o]=a)}return r}},"./node_modules/memoize-one/dist/memoize-one.esm.js":(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function n(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(n=e[r],i=t[r],!(n===i||s(n)&&s(i)))return!1;var n,i;return!0}function i(e,t){void 0===t&&(t=n);var r=null;function s(){for(var s=[],n=0;n<arguments.length;n++)s[n]=arguments[n];if(r&&r.lastThis===this&&t(s,r.lastArgs))return r.lastResult;var i=e.apply(this,s);return r={lastResult:i,lastArgs:s,lastThis:this},i}return s.clear=function(){r=null},s}},"./node_modules/process/browser.js":e=>{var t,r,s=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:n}catch(e){t=n}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var a,c=[],l=!1,d=-1;function u(){l&&a&&(l=!1,a.length?c=a.concat(c):d=-1,c.length&&m())}function m(){if(!l){var e=o(u);l=!0;for(var t=c.length;t;){for(a=c,c=[];++d<t;)a&&a[d].run();d=-1,t=c.length}a=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function h(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new p(e,t)),1!==c.length||l||o(m)},p.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=h,s.addListener=h,s.once=h,s.off=h,s.removeListener=h,s.removeAllListeners=h,s.emit=h,s.prependListener=h,s.prependOnceListener=h,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},"./node_modules/query-string/index.js":(e,t,r)=>{"use strict";const s=r("./node_modules/strict-uri-encode/index.js"),n=r("./node_modules/decode-uri-component/index.js"),i=r("./node_modules/split-on-first/index.js"),o=r("./node_modules/filter-obj/index.js"),a=Symbol("encodeFragmentIdentifier");function c(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function l(e,t){return t.encode?t.strict?s(e):encodeURIComponent(e):e}function d(e,t){return t.decode?n(e):e}function u(e){return Array.isArray(e)?e.sort():"object"==typeof e?u(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function m(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function p(e){const t=(e=m(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function h(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function f(e,t){c((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const r=function(e){let t;switch(e.arrayFormat){case"index":return(e,r,s)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===s[e]&&(s[e]={}),s[e][t[1]]=r):s[e]=r};case"bracket":return(e,r,s)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==s[e]?s[e]=[].concat(s[e],r):s[e]=[r]:s[e]=r};case"colon-list-separator":return(e,r,s)=>{t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),t?void 0!==s[e]?s[e]=[].concat(s[e],r):s[e]=[r]:s[e]=r};case"comma":case"separator":return(t,r,s)=>{const n="string"==typeof r&&r.includes(e.arrayFormatSeparator),i="string"==typeof r&&!n&&d(r,e).includes(e.arrayFormatSeparator);r=i?d(r,e):r;const o=n||i?r.split(e.arrayFormatSeparator).map((t=>d(t,e))):null===r?r:d(r,e);s[t]=o};case"bracket-separator":return(t,r,s)=>{const n=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!n)return void(s[t]=r?d(r,e):r);const i=null===r?[]:r.split(e.arrayFormatSeparator).map((t=>d(t,e)));void 0!==s[t]?s[t]=[].concat(s[t],i):s[t]=i};default:return(e,t,r)=>{void 0!==r[e]?r[e]=[].concat(r[e],t):r[e]=t}}}(t),s=Object.create(null);if("string"!=typeof e)return s;if(!(e=e.trim().replace(/^[?#&]/,"")))return s;for(const n of e.split("&")){if(""===n)continue;let[e,o]=i(t.decode?n.replace(/\+/g," "):n,"=");o=void 0===o?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?o:d(o,t),r(d(e,t),o,s)}for(const e of Object.keys(s)){const r=s[e];if("object"==typeof r&&null!==r)for(const e of Object.keys(r))r[e]=h(r[e],t);else s[e]=h(r,t)}return!1===t.sort?s:(!0===t.sort?Object.keys(s).sort():Object.keys(s).sort(t.sort)).reduce(((e,t)=>{const r=s[t];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?e[t]=u(r):e[t]=r,e}),Object.create(null))}t.extract=p,t.parse=f,t.stringify=(e,t)=>{if(!e)return"";c((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const r=r=>t.skipNull&&null==e[r]||t.skipEmptyString&&""===e[r],s=function(e){switch(e.arrayFormat){case"index":return t=>(r,s)=>{const n=r.length;return void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?r:null===s?[...r,[l(t,e),"[",n,"]"].join("")]:[...r,[l(t,e),"[",l(n,e),"]=",l(s,e)].join("")]};case"bracket":return t=>(r,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?r:null===s?[...r,[l(t,e),"[]"].join("")]:[...r,[l(t,e),"[]=",l(s,e)].join("")];case"colon-list-separator":return t=>(r,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?r:null===s?[...r,[l(t,e),":list="].join("")]:[...r,[l(t,e),":list=",l(s,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return r=>(s,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?s:(n=null===n?"":n,0===s.length?[[l(r,e),t,l(n,e)].join("")]:[[s,l(n,e)].join(e.arrayFormatSeparator)])}default:return t=>(r,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?r:null===s?[...r,l(t,e)]:[...r,[l(t,e),"=",l(s,e)].join("")]}}(t),n={};for(const t of Object.keys(e))r(t)||(n[t]=e[t]);const i=Object.keys(n);return!1!==t.sort&&i.sort(t.sort),i.map((r=>{const n=e[r];return void 0===n?"":null===n?l(r,t):Array.isArray(n)?0===n.length&&"bracket-separator"===t.arrayFormat?l(r,t)+"[]":n.reduce(s(r),[]).join("&"):l(r,t)+"="+l(n,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[r,s]=i(e,"#");return Object.assign({url:r.split("?")[0]||"",query:f(p(e),t)},t&&t.parseFragmentIdentifier&&s?{fragmentIdentifier:d(s,t)}:{})},t.stringifyUrl=(e,r)=>{r=Object.assign({encode:!0,strict:!0,[a]:!0},r);const s=m(e.url).split("?")[0]||"",n=t.extract(e.url),i=t.parse(n,{sort:!1}),o=Object.assign(i,e.query);let c=t.stringify(o,r);c&&(c=`?${c}`);let d=function(e){let t="";const r=e.indexOf("#");return-1!==r&&(t=e.slice(r)),t}(e.url);return e.fragmentIdentifier&&(d=`#${r[a]?l(e.fragmentIdentifier,r):e.fragmentIdentifier}`),`${s}${c}${d}`},t.pick=(e,r,s)=>{s=Object.assign({parseFragmentIdentifier:!0,[a]:!1},s);const{url:n,query:i,fragmentIdentifier:c}=t.parseUrl(e,s);return t.stringifyUrl({url:n,query:o(i,r),fragmentIdentifier:c},s)},t.exclude=(e,r,s)=>{const n=Array.isArray(r)?e=>!r.includes(e):(e,t)=>!r(e,t);return t.pick(e,n,s)}},"./node_modules/react/cjs/react.production.min.js":(e,t)=>{"use strict";var r=Symbol.for("react.element"),s=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function y(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||h}function b(){}function v(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||h}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var w=v.prototype=new b;w.constructor=v,f(w,y.prototype),w.isPureReactComponent=!0;var _=Array.isArray,C=Object.prototype.hasOwnProperty,I={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,s){var n,i={},o=null,a=null;if(null!=t)for(n in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)C.call(t,n)&&!O.hasOwnProperty(n)&&(i[n]=t[n]);var c=arguments.length-2;if(1===c)i.children=s;else if(1<c){for(var l=Array(c),d=0;d<c;d++)l[d]=arguments[d+2];i.children=l}if(e&&e.defaultProps)for(n in c=e.defaultProps)void 0===i[n]&&(i[n]=c[n]);return{$$typeof:r,type:e,key:o,ref:a,props:i,_owner:I.current}}function S(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}var k=/\/+/g;function T(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,n,i,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case r:case s:c=!0}}if(c)return o=o(c=e),e=""===i?"."+T(c,0):i,_(o)?(n="",null!=e&&(n=e.replace(k,"$&/")+"/"),A(o,t,n,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(k,"$&/")+"/")+e)),t.push(o)),1;if(c=0,i=""===i?".":i+":",_(e))for(var l=0;l<e.length;l++){var d=i+T(a=e[l],l);c+=A(a,t,n,d,o)}else if(d=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"==typeof d)for(e=d.call(e),l=0;!(a=e.next()).done;)c+=A(a=a.value,t,n,d=i+T(a,l++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function j(e,t,r){if(null==e)return e;var s=[],n=0;return A(e,s,"","",(function(e){return t.call(r,e,n++)})),s}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},N={transition:null},x={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:N,ReactCurrentOwner:I};t.Children={map:j,forEach:function(e,t,r){j(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return j(e,(function(){t++})),t},toArray:function(e){return j(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=n,t.Profiler=o,t.PureComponent=v,t.StrictMode=i,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=x,t.cloneElement=function(e,t,s){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=f({},e.props),i=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=I.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)C.call(t,l)&&!O.hasOwnProperty(l)&&(n[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)n.children=s;else if(1<l){c=Array(l);for(var d=0;d<l;d++)c[d]=arguments[d+2];n.children=c}return{$$typeof:r,type:e.type,key:i,ref:o,props:n,_owner:a}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,r){return D.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,r){return D.current.useReducer(e,t,r)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return D.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},"./node_modules/react/index.js":(e,t,r)=>{"use strict";e.exports=r("./node_modules/react/cjs/react.production.min.js")},"./node_modules/split-on-first/index.js":e=>{"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const r=e.indexOf(t);return-1===r?[e]:[e.slice(0,r),e.slice(r+t.length)]}},"./node_modules/strict-uri-encode/index.js":e=>{"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},"./node_modules/@babel/runtime/helpers/esm/classCallCheck.js":(e,t,r)=>{"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,{Z:()=>s})},"./node_modules/@babel/runtime/helpers/esm/createClass.js":(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=r("./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js");function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(0,s.Z)(n.key),n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}},"./node_modules/@babel/runtime/helpers/esm/defineProperty.js":(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r("./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js");function n(e,t,r){return(t=(0,s.Z)(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},"./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js":(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r("./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js");function n(e,t){if(null==e)return{};var r,n,i=(0,s.Z)(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}},"./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js":(e,t,r)=>{"use strict";function s(e,t){if(null==e)return{};var r,s,n={},i=Object.keys(e);for(s=0;s<i.length;s++)r=i[s],t.indexOf(r)>=0||(n[r]=e[r]);return n}r.d(t,{Z:()=>s})},"./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js":(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r("./node_modules/@babel/runtime/helpers/esm/typeof.js");function n(e){var t=function(e,t){if("object"!==(0,s.Z)(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==(0,s.Z)(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,s.Z)(t)?t:String(t)}},"./node_modules/@babel/runtime/helpers/esm/typeof.js":(e,t,r)=>{"use strict";function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}r.d(t,{Z:()=>s})}},e=>{var t;t="./packages/quickload/src/quickload.ts",e(e.s=t)}]);
//# sourceMappingURL=quickload.10203c8525d31d2948a9.js.map